<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.24.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="æœ¬æ•™ç¨‹å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨TypeScriptå’ŒAnchoræ¡†æ¶æ¥è°ƒç”¨æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ETFä»£å¸åˆ›å»ºæŒ‡ä»¤.">
<meta property="og:type" content="article">
<meta property="og:title" content="Solanaå®æˆ˜-åˆ›å»ºETFæŒ‡ä»¤çš„è°ƒç”¨">
<meta property="og:url" content="http://example.com/2025/09/20/Solana%E5%AE%9E%E6%88%98-%E5%88%9B%E5%BB%BAETF%E6%8C%87%E4%BB%A4%E7%9A%84%E8%B0%83%E7%94%A8/index.html">
<meta property="og:site_name" content="samxie52">
<meta property="og:description" content="æœ¬æ•™ç¨‹å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨TypeScriptå’ŒAnchoræ¡†æ¶æ¥è°ƒç”¨æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ETFä»£å¸åˆ›å»ºæŒ‡ä»¤.">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-09-20T09:25:19.000Z">
<meta property="article:modified_time" content="2025-09-21T02:42:34.735Z">
<meta property="article:author" content="samxie">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2025/09/20/Solana%E5%AE%9E%E6%88%98-%E5%88%9B%E5%BB%BAETF%E6%8C%87%E4%BB%A4%E7%9A%84%E8%B0%83%E7%94%A8/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2025/09/20/Solana%E5%AE%9E%E6%88%98-%E5%88%9B%E5%BB%BAETF%E6%8C%87%E4%BB%A4%E7%9A%84%E8%B0%83%E7%94%A8/","path":"2025/09/20/Solanaå®æˆ˜-åˆ›å»ºETFæŒ‡ä»¤çš„è°ƒç”¨/","title":"Solanaå®æˆ˜-åˆ›å»ºETFæŒ‡ä»¤çš„è°ƒç”¨"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Solanaå®æˆ˜-åˆ›å»ºETFæŒ‡ä»¤çš„è°ƒç”¨ | samxie52</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">samxie52</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">æ¦‚è¿°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A41-%E9%85%8D%E7%BD%AEAnchor%E7%A8%8B%E5%BA%8F%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-number">2.</span> <span class="nav-text">æ­¥éª¤1: é…ç½®Anchorç¨‹åºå®¢æˆ·ç«¯</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Anchor-Provider%E6%A6%82%E5%BF%B5"><span class="nav-number">2.1.</span> <span class="nav-text">1. Anchor Provideræ¦‚å¿µ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%A8%8B%E5%BA%8F%E5%AE%9E%E4%BE%8B%E5%8C%96"><span class="nav-number">2.2.</span> <span class="nav-text">2. ç¨‹åºå®ä¾‹åŒ–</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E9%92%B1%E5%8C%85%E7%AE%A1%E7%90%86%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="nav-number">2.3.</span> <span class="nav-text">3. é’±åŒ…ç®¡ç†æœ€ä½³å®è·µ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%92%B1%E5%8C%85"><span class="nav-number">2.3.1.</span> <span class="nav-text">å¼€å‘ç¯å¢ƒé’±åŒ…</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E9%92%B1%E5%8C%85"><span class="nav-number">2.3.2.</span> <span class="nav-text">ç”Ÿäº§ç¯å¢ƒé’±åŒ…</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A42-%E5%AE%9E%E7%8E%B0%E5%9C%B0%E5%9D%80%E6%B4%BE%E7%94%9F%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0"><span class="nav-number">3.</span> <span class="nav-text">æ­¥éª¤2: å®ç°åœ°å€æ´¾ç”Ÿå·¥å…·å‡½æ•°</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-PDA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-number">3.1.</span> <span class="nav-text">1. PDAçš„å·¥ä½œåŸç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%A7%8D%E5%AD%90%E8%AE%BE%E8%AE%A1%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7"><span class="nav-number">3.2.</span> <span class="nav-text">2. ç§å­è®¾è®¡çš„é‡è¦æ€§</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%94%AF%E4%B8%80%E6%80%A7%E4%BF%9D%E8%AF%81"><span class="nav-number">3.2.1.</span> <span class="nav-text">å”¯ä¸€æ€§ä¿è¯</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86"><span class="nav-number">3.2.2.</span> <span class="nav-text">ç‰ˆæœ¬ç®¡ç†</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="nav-number">3.3.</span> <span class="nav-text">3. å‡½æ•°é‡è½½çš„ä¼˜åŠ¿</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%81%B5%E6%B4%BB%E6%80%A7"><span class="nav-number">3.3.1.</span> <span class="nav-text">çµæ´»æ€§</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8"><span class="nav-number">3.3.2.</span> <span class="nav-text">ç±»å‹å®‰å…¨</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A43-%E5%AE%9E%E7%8E%B0ETF%E4%BB%A3%E5%B8%81%E5%88%9B%E5%BB%BA%E9%80%BB%E8%BE%91"><span class="nav-number">4.</span> <span class="nav-text">æ­¥éª¤3: å®ç°ETFä»£å¸åˆ›å»ºé€»è¾‘</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%85%B3%E8%81%94%E4%BB%A3%E5%B8%81%E8%B4%A6%E6%88%B7%EF%BC%88ATA%EF%BC%89%E6%9C%BA%E5%88%B6"><span class="nav-number">4.1.</span> <span class="nav-text">1. å…³è”ä»£å¸è´¦æˆ·ï¼ˆATAï¼‰æœºåˆ¶</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFATA%EF%BC%9F"><span class="nav-number">4.1.1.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯ATAï¼Ÿ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88ETF%E9%9C%80%E8%A6%81%E5%A4%9A%E4%B8%AAATA%EF%BC%9F"><span class="nav-number">4.1.2.</span> <span class="nav-text">ä¸ºä»€ä¹ˆETFéœ€è¦å¤šä¸ªATAï¼Ÿ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BA%A4%E6%98%93%E6%9E%84%E5%BB%BA%E6%A8%A1%E5%BC%8F"><span class="nav-number">4.2.</span> <span class="nav-text">2. äº¤æ˜“æ„å»ºæ¨¡å¼</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C"><span class="nav-number">4.2.1.</span> <span class="nav-text">æ‰¹é‡æŒ‡ä»¤æ‰§è¡Œ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8C%87%E4%BB%A4%E9%A1%BA%E5%BA%8F%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7"><span class="nav-number">4.2.2.</span> <span class="nav-text">æŒ‡ä»¤é¡ºåºçš„é‡è¦æ€§</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E7%AD%96%E7%95%A5"><span class="nav-number">4.3.</span> <span class="nav-text">3. é”™è¯¯å¤„ç†ç­–ç•¥</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B9%82%E7%AD%89%E6%80%A7%E8%AE%BE%E8%AE%A1"><span class="nav-number">4.3.1.</span> <span class="nav-text">å¹‚ç­‰æ€§è®¾è®¡</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B7%E4%BD%93%E9%94%99%E8%AF%AF%E7%B1%BB%E5%9E%8B%E5%A4%84%E7%90%86"><span class="nav-number">4.3.2.</span> <span class="nav-text">å…·ä½“é”™è¯¯ç±»å‹å¤„ç†</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C%E7%AE%A1%E7%90%86"><span class="nav-number">4.4.</span> <span class="nav-text">4. å¼‚æ­¥æ“ä½œç®¡ç†</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Promise%E5%B9%B6%E5%8F%91%E4%BC%98%E5%8C%96"><span class="nav-number">4.4.1.</span> <span class="nav-text">Promiseå¹¶å‘ä¼˜åŒ–</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A44-%E5%AE%9E%E7%8E%B0%E5%AE%8C%E6%95%B4%E7%9A%84%E8%B0%83%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="nav-number">5.</span> <span class="nav-text">æ­¥éª¤4: å®ç°å®Œæ•´çš„è°ƒç”¨ç¤ºä¾‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%92%B1%E5%8C%85%E9%80%89%E6%8B%A9%E7%AD%96%E7%95%A5"><span class="nav-number">5.1.</span> <span class="nav-text">1. é’±åŒ…é€‰æ‹©ç­–ç•¥</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83vs%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83"><span class="nav-number">5.1.1.</span> <span class="nav-text">å¼€å‘ç¯å¢ƒvsæµ‹è¯•ç¯å¢ƒ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-ETF%E9%85%8D%E7%BD%AE%E8%AE%BE%E8%AE%A1"><span class="nav-number">5.2.</span> <span class="nav-text">2. ETFé…ç½®è®¾è®¡</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9D%83%E9%87%8D%E9%85%8D%E7%BD%AE%E7%AD%96%E7%95%A5"><span class="nav-number">5.2.1.</span> <span class="nav-text">æƒé‡é…ç½®ç­–ç•¥</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E5%92%8C%E8%B0%83%E8%AF%95"><span class="nav-number">5.3.</span> <span class="nav-text">3. é”™è¯¯å¤„ç†å’Œè°ƒè¯•</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%A4%E6%98%93%E5%A4%B1%E8%B4%A5%E5%88%86%E6%9E%90"><span class="nav-number">5.3.1.</span> <span class="nav-text">äº¤æ˜“å¤±è´¥åˆ†æ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7"><span class="nav-number">5.3.2.</span> <span class="nav-text">è°ƒè¯•æŠ€å·§</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E5%8A%9F%E8%83%BD%E5%92%8C%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE"><span class="nav-number">6.</span> <span class="nav-text">é«˜çº§åŠŸèƒ½å’Œä¼˜åŒ–å»ºè®®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%85%8D%E7%BD%AE%E9%AA%8C%E8%AF%81"><span class="nav-number">6.1.</span> <span class="nav-text">1. é…ç½®éªŒè¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%89%B9%E9%87%8F%E6%93%8D%E4%BD%9C%E4%BC%98%E5%8C%96"><span class="nav-number">6.2.</span> <span class="nav-text">2. æ‰¹é‡æ“ä½œä¼˜åŒ–</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E4%BA%A4%E6%98%93%E8%B4%B9%E7%94%A8%E4%BC%B0%E7%AE%97"><span class="nav-number">6.3.</span> <span class="nav-text">3. äº¤æ˜“è´¹ç”¨ä¼°ç®—</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%85%83%E6%95%B0%E6%8D%AE%E6%A0%87%E5%87%86%E5%8C%96"><span class="nav-number">6.4.</span> <span class="nav-text">4. å…ƒæ•°æ®æ ‡å‡†åŒ–</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%92%8C%E7%8A%B6%E6%80%81%E8%B7%9F%E8%B8%AA"><span class="nav-number">6.5.</span> <span class="nav-text">5. äº‹ä»¶ç›‘å¬å’ŒçŠ¶æ€è·Ÿè¸ª</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E4%BA%A4%E6%98%93%E9%87%8D%E8%AF%95%E6%9C%BA%E5%88%B6"><span class="nav-number">6.6.</span> <span class="nav-text">6. äº¤æ˜“é‡è¯•æœºåˆ¶</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E7%9A%84%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%E9%9B%86%E5%90%88"><span class="nav-number">7.</span> <span class="nav-text">å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹é›†åˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%88%9B%E5%BB%BA%E5%A4%9A%E6%A0%B7%E5%8C%96%E7%9A%84ETF%E7%BB%84%E5%90%88"><span class="nav-number">7.1.</span> <span class="nav-text">1. åˆ›å»ºå¤šæ ·åŒ–çš„ETFç»„åˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%89%B9%E9%87%8F%E5%88%9B%E5%BB%BAETF"><span class="nav-number">7.2.</span> <span class="nav-text">2. æ‰¹é‡åˆ›å»ºETF</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E5%92%8C%E8%B0%83%E8%AF%95%E6%8C%87%E5%8D%97"><span class="nav-number">8.</span> <span class="nav-text">æµ‹è¯•å’Œè°ƒè¯•æŒ‡å—</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E7%A4%BA%E4%BE%8B"><span class="nav-number">8.1.</span> <span class="nav-text">1. å•å…ƒæµ‹è¯•ç¤ºä¾‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95"><span class="nav-number">8.2.</span> <span class="nav-text">2. é›†æˆæµ‹è¯•</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="nav-number">9.</span> <span class="nav-text">å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E4%BD%99%E9%A2%9D%E4%B8%8D%E8%B6%B3%E9%97%AE%E9%A2%98"><span class="nav-number">9.1.</span> <span class="nav-text">1. ä½™é¢ä¸è¶³é—®é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-RPC%E9%99%90%E6%B5%81%E9%97%AE%E9%A2%98"><span class="nav-number">9.2.</span> <span class="nav-text">2. RPCé™æµé—®é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E7%BD%91%E7%BB%9C%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="nav-number">9.3.</span> <span class="nav-text">3. ç½‘ç»œé”™è¯¯å¤„ç†</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE"><span class="nav-number">10.</span> <span class="nav-text">æ€§èƒ½ä¼˜åŒ–å»ºè®®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%B9%B6%E8%A1%8C%E5%A4%84%E7%90%86"><span class="nav-number">10.1.</span> <span class="nav-text">1. å¹¶è¡Œå¤„ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6"><span class="nav-number">10.2.</span> <span class="nav-text">2. ç¼“å­˜æœºåˆ¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%89%B9%E9%87%8FRPC%E8%B0%83%E7%94%A8"><span class="nav-number">10.3.</span> <span class="nav-text">3. æ‰¹é‡RPCè°ƒç”¨</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">11.</span> <span class="nav-text">æ€»ç»“</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%94%A7-%E6%8A%80%E6%9C%AF%E6%A0%88%E6%8E%8C%E6%8F%A1"><span class="nav-number">11.1.</span> <span class="nav-text">ğŸ”§ æŠ€æœ¯æ ˆæŒæ¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%93%9A-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3"><span class="nav-number">11.2.</span> <span class="nav-text">ğŸ“š æ ¸å¿ƒæ¦‚å¿µç†è§£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%AE%9E%E8%B7%B5%E6%8A%80%E8%83%BD%E5%9F%B9%E5%85%BB"><span class="nav-number">11.3.</span> <span class="nav-text">ğŸ› ï¸ å®è·µæŠ€èƒ½åŸ¹å…»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%9A%80-%E6%89%A9%E5%B1%95%E8%83%BD%E5%8A%9B%E5%BB%BA%E8%AE%BE"><span class="nav-number">11.4.</span> <span class="nav-text">ğŸš€ æ‰©å±•èƒ½åŠ›å»ºè®¾</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%99%84%E5%BD%95%EF%BC%9A%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%E6%B8%85%E5%8D%95"><span class="nav-number">12.</span> <span class="nav-text">é™„å½•ï¼šå®Œæ•´ä»£ç æ¸…å•</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#A-package-json%E4%BE%9D%E8%B5%96"><span class="nav-number">12.1.</span> <span class="nav-text">A. package.jsonä¾èµ–</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#B-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="nav-number">12.2.</span> <span class="nav-text">B. ç¯å¢ƒé…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C-TypeScript%E9%85%8D%E7%BD%AE"><span class="nav-number">12.3.</span> <span class="nav-text">C. TypeScripté…ç½®</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">samxie</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">56</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/20/Solana%E5%AE%9E%E6%88%98-%E5%88%9B%E5%BB%BAETF%E6%8C%87%E4%BB%A4%E7%9A%84%E8%B0%83%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="samxie">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="samxie52">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Solanaå®æˆ˜-åˆ›å»ºETFæŒ‡ä»¤çš„è°ƒç”¨ | samxie52">
      <meta itemprop="description" content="æœ¬æ•™ç¨‹å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨TypeScriptå’ŒAnchoræ¡†æ¶æ¥è°ƒç”¨æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ETFä»£å¸åˆ›å»ºæŒ‡ä»¤.">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Solanaå®æˆ˜-åˆ›å»ºETFæŒ‡ä»¤çš„è°ƒç”¨
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-09-20 17:25:19" itemprop="dateCreated datePublished" datetime="2025-09-20T17:25:19+08:00">2025-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-09-21 10:42:34" itemprop="dateModified" datetime="2025-09-21T10:42:34+08:00">2025-09-21</time>
    </span>

  
    <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

            <div class="post-description">æœ¬æ•™ç¨‹å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨TypeScriptå’ŒAnchoræ¡†æ¶æ¥è°ƒç”¨æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ETFä»£å¸åˆ›å»ºæŒ‡ä»¤.</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p><strong>ä»€ä¹ˆæ˜¯å®¢æˆ·ç«¯è°ƒç”¨</strong>ï¼Ÿ<br>åœ¨Solanaç”Ÿæ€ä¸­ï¼Œæ™ºèƒ½åˆçº¦ï¼ˆç¨‹åºï¼‰éƒ¨ç½²åœ¨é“¾ä¸Šåï¼Œéœ€è¦é€šè¿‡å®¢æˆ·ç«¯ä»£ç æ¥è°ƒç”¨å…¶åŠŸèƒ½ã€‚æœ¬æ•™ç¨‹å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨TypeScriptå’ŒAnchoræ¡†æ¶æ¥è°ƒç”¨æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ETFä»£å¸åˆ›å»ºæŒ‡ä»¤ã€‚</p>
<p><strong>æœ¬æ•™ç¨‹æ¶µç›–çš„æ ¸å¿ƒæŠ€æœ¯</strong>ï¼š</p>
<ol>
<li><strong>Anchorå®¢æˆ·ç«¯é…ç½®</strong>ï¼šè®¾ç½®ç¨‹åºè¿æ¥å’Œé’±åŒ…</li>
<li><strong>PDAåœ°å€æ´¾ç”Ÿ</strong>ï¼šè®¡ç®—ç¨‹åºæ´¾ç”Ÿåœ°å€</li>
<li><strong>å…³è”ä»£å¸è´¦æˆ·</strong>ï¼šä¸ºETFåˆ›å»ºå¿…è¦çš„ä»£å¸è´¦æˆ·</li>
<li><strong>äº¤æ˜“æ„å»ºå’Œå‘é€</strong>ï¼šç»„è£…å®Œæ•´çš„åˆ›å»ºäº¤æ˜“</li>
</ol>
<p><strong>å­¦ä¹ ç›®æ ‡</strong>ï¼š</p>
<ul>
<li>ç†è§£Solanaå®¢æˆ·ç«¯æ¶æ„</li>
<li>æŒæ¡PDAåœ°å€è®¡ç®—æ–¹æ³•</li>
<li>å­¦ä¼šå¤„ç†å…³è”ä»£å¸è´¦æˆ·</li>
<li>å®ç°å®Œæ•´çš„ETFåˆ›å»ºæµç¨‹</li>
</ul>
<h2 id="æ­¥éª¤1-é…ç½®Anchorç¨‹åºå®¢æˆ·ç«¯"><a href="#æ­¥éª¤1-é…ç½®Anchorç¨‹åºå®¢æˆ·ç«¯" class="headerlink" title="æ­¥éª¤1: é…ç½®Anchorç¨‹åºå®¢æˆ·ç«¯"></a>æ­¥éª¤1: é…ç½®Anchorç¨‹åºå®¢æˆ·ç«¯</h2><p><strong>ç›®çš„</strong>ï¼šå»ºç«‹ä¸Solanaç½‘ç»œå’Œç¨‹åºçš„è¿æ¥ï¼Œé…ç½®é’±åŒ…ç”¨äºç­¾åäº¤æ˜“ã€‚</p>
<p><strong>æ–‡ä»¶ä½ç½®</strong>ï¼š<code>../ibuidl-etf-dapp/anchor/example/api/const.ts</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> anchor <span class="keyword">from</span> <span class="string">&quot;@coral-xyz/anchor&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Program</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@coral-xyz/anchor&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Counter</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../../target/types/counter&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ“¡ è·å–ç¯å¢ƒé…ç½®çš„æä¾›è€…ï¼ˆProviderï¼‰</span></span><br><span class="line"><span class="comment">// Providerå°è£…äº†ä¸Solanaç½‘ç»œçš„è¿æ¥é…ç½®ï¼ŒåŒ…æ‹¬RPCç«¯ç‚¹ã€é’±åŒ…ç­‰</span></span><br><span class="line"><span class="keyword">const</span> provider = anchor.<span class="property">AnchorProvider</span>.<span class="title function_">env</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ”§ è®¾ç½®å…¨å±€æä¾›è€…ï¼Œè®©AnchorçŸ¥é“ä½¿ç”¨å“ªä¸ªç½‘ç»œè¿æ¥</span></span><br><span class="line">anchor.<span class="title function_">setProvider</span>(provider);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ—ï¸ è·å–ç¨‹åºå®ä¾‹</span></span><br><span class="line"><span class="comment">// Counteræ˜¯é€šè¿‡anchor buildç”Ÿæˆçš„TypeScriptç±»å‹å®šä¹‰</span></span><br><span class="line"><span class="comment">// è¿™ä¸ªå®ä¾‹æä¾›äº†æ‰€æœ‰ç¨‹åºæŒ‡ä»¤çš„ç±»å‹å®‰å…¨è°ƒç”¨æ–¹æ³•</span></span><br><span class="line"><span class="keyword">const</span> program = anchor.<span class="property">workspace</span>.<span class="property">Counter</span> <span class="keyword">as</span> <span class="title class_">Program</span>&lt;<span class="title class_">Counter</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡ºä¾›å…¶ä»–æ¨¡å—ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">export</span> &#123; program, provider &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ”‘ ä½¿ç”¨é»˜è®¤é’±åŒ…ï¼ˆé€šå¸¸æ˜¯æœ¬åœ°å¼€å‘ç¯å¢ƒçš„é’±åŒ…ï¼‰</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useDefaultWallet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// local()æ–¹æ³•ä¼šè¯»å–æœ¬åœ°Solanaé…ç½®ä¸­çš„é»˜è®¤é’±åŒ…</span></span><br><span class="line">    <span class="comment">// é€šå¸¸æ˜¯ ~/.config/solana/id.json æ–‡ä»¶ä¸­çš„å¯†é’¥å¯¹</span></span><br><span class="line">    <span class="keyword">const</span> wallet = anchor.<span class="property">Wallet</span>.<span class="title function_">local</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wallet</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ­ ä½¿ç”¨é¢„è®¾çš„è®¿å®¢é’±åŒ…</span></span><br><span class="line"><span class="comment">// Pubkey: jyre3oLXdJhtT958Vx9w8Syf5mUuhXTRiqW8v47ZVcd</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useVisitorWallet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ğŸ” ä»å›ºå®šçš„ç§é’¥æ•°ç»„åˆ›å»ºå¯†é’¥å¯¹</span></span><br><span class="line">    <span class="comment">// æ³¨æ„ï¼šç”Ÿäº§ç¯å¢ƒä¸­ç»ä¸åº”è¯¥ç¡¬ç¼–ç ç§é’¥ï¼</span></span><br><span class="line">    <span class="keyword">const</span> keypair = anchor.<span class="property">web3</span>.<span class="property">Keypair</span>.<span class="title function_">fromSecretKey</span>(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Uint8Array</span>([</span><br><span class="line">            <span class="number">76</span>, <span class="number">39</span>, <span class="number">178</span>, <span class="number">2</span>, <span class="number">80</span>, <span class="number">192</span>, <span class="number">236</span>, <span class="number">106</span>,</span><br><span class="line">            <span class="number">176</span>, <span class="number">133</span>, <span class="number">251</span>, <span class="number">247</span>, <span class="number">21</span>, <span class="number">204</span>, <span class="number">188</span>, <span class="number">229</span>,</span><br><span class="line">            <span class="number">249</span>, <span class="number">243</span>, <span class="number">3</span>, <span class="number">61</span>, <span class="number">192</span>, <span class="number">237</span>, <span class="number">105</span>, <span class="number">245</span>,</span><br><span class="line">            <span class="number">199</span>, <span class="number">113</span>, <span class="number">185</span>, <span class="number">29</span>, <span class="number">121</span>, <span class="number">208</span>, <span class="number">216</span>, <span class="number">79</span>,</span><br><span class="line">            <span class="number">11</span>, <span class="number">2</span>, <span class="number">174</span>, <span class="number">91</span>, <span class="number">154</span>, <span class="number">3</span>, <span class="number">48</span>, <span class="number">129</span>,</span><br><span class="line">            <span class="number">231</span>, <span class="number">156</span>, <span class="number">187</span>, <span class="number">50</span>, <span class="number">99</span>, <span class="number">160</span>, <span class="number">80</span>, <span class="number">116</span>,</span><br><span class="line">            <span class="number">78</span>, <span class="number">0</span>, <span class="number">12</span>, <span class="number">169</span>, <span class="number">0</span>, <span class="number">147</span>, <span class="number">34</span>, <span class="number">221</span>,</span><br><span class="line">            <span class="number">142</span>, <span class="number">199</span>, <span class="number">21</span>, <span class="number">64</span>, <span class="number">136</span>, <span class="number">132</span>, <span class="number">130</span>, <span class="number">2</span></span><br><span class="line">        ])</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ’ åˆ›å»ºé’±åŒ…å®ä¾‹</span></span><br><span class="line">    <span class="comment">// Walletç±»åŒ…è£…äº†å¯†é’¥å¯¹ï¼Œæä¾›ç­¾ååŠŸèƒ½</span></span><br><span class="line">    <span class="keyword">const</span> wallet = <span class="keyword">new</span> anchor.<span class="title class_">Wallet</span>(keypair);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wallet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æŠ€æœ¯è¦ç‚¹è§£æ</strong>ï¼š</p>
<h3 id="1-Anchor-Provideræ¦‚å¿µ"><a href="#1-Anchor-Provideræ¦‚å¿µ" class="headerlink" title="1. Anchor Provideræ¦‚å¿µ"></a>1. Anchor Provideræ¦‚å¿µ</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> provider = anchor.<span class="property">AnchorProvider</span>.<span class="title function_">env</span>();</span><br></pre></td></tr></table></figure>

<p><strong>Providerçš„ä½œç”¨</strong>ï¼š</p>
<ul>
<li><strong>ç½‘ç»œè¿æ¥</strong>ï¼šç®¡ç†ä¸Solana RPCèŠ‚ç‚¹çš„è¿æ¥</li>
<li><strong>é’±åŒ…é›†æˆ</strong>ï¼šå¤„ç†äº¤æ˜“ç­¾å</li>
<li><strong>é…ç½®ç®¡ç†</strong>ï¼šç»Ÿä¸€ç®¡ç†ç½‘ç»œå’Œé’±åŒ…é…ç½®</li>
</ul>
<p><strong>ç¯å¢ƒå˜é‡é…ç½®</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ~/.bashrc æˆ– ~/.zshrc ä¸­è®¾ç½®</span></span><br><span class="line"><span class="built_in">export</span> ANCHOR_PROVIDER_URL=<span class="string">&quot;https://api.devnet.solana.com&quot;</span></span><br><span class="line"><span class="built_in">export</span> ANCHOR_WALLET=<span class="string">&quot;~/.config/solana/id.json&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-ç¨‹åºå®ä¾‹åŒ–"><a href="#2-ç¨‹åºå®ä¾‹åŒ–" class="headerlink" title="2. ç¨‹åºå®ä¾‹åŒ–"></a>2. ç¨‹åºå®ä¾‹åŒ–</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> program = anchor.<span class="property">workspace</span>.<span class="property">Counter</span> <span class="keyword">as</span> <span class="title class_">Program</span>&lt;<span class="title class_">Counter</span>&gt;;</span><br></pre></td></tr></table></figure>

<p><strong>ç±»å‹å®‰å…¨çš„å¥½å¤„</strong>ï¼š</p>
<ul>
<li><strong>è‡ªåŠ¨è¡¥å…¨</strong>ï¼šIDEå¯ä»¥æä¾›æŒ‡ä»¤å’Œè´¦æˆ·çš„è‡ªåŠ¨è¡¥å…¨</li>
<li><strong>ç±»å‹æ£€æŸ¥</strong>ï¼šç¼–è¯‘æ—¶å‘ç°å‚æ•°ç±»å‹é”™è¯¯</li>
<li><strong>æ–‡æ¡£é›†æˆ</strong>ï¼šé¼ æ ‡æ‚¬åœæ˜¾ç¤ºå‚æ•°è¯´æ˜</li>
</ul>
<h3 id="3-é’±åŒ…ç®¡ç†æœ€ä½³å®è·µ"><a href="#3-é’±åŒ…ç®¡ç†æœ€ä½³å®è·µ" class="headerlink" title="3. é’±åŒ…ç®¡ç†æœ€ä½³å®è·µ"></a>3. é’±åŒ…ç®¡ç†æœ€ä½³å®è·µ</h3><h4 id="å¼€å‘ç¯å¢ƒé’±åŒ…"><a href="#å¼€å‘ç¯å¢ƒé’±åŒ…" class="headerlink" title="å¼€å‘ç¯å¢ƒé’±åŒ…"></a>å¼€å‘ç¯å¢ƒé’±åŒ…</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> wallet = anchor.<span class="property">Wallet</span>.<span class="title function_">local</span>(); <span class="comment">// âœ… å¼€å‘ç¯å¢ƒä½¿ç”¨</span></span><br></pre></td></tr></table></figure>

<h4 id="ç”Ÿäº§ç¯å¢ƒé’±åŒ…"><a href="#ç”Ÿäº§ç¯å¢ƒé’±åŒ…" class="headerlink" title="ç”Ÿäº§ç¯å¢ƒé’±åŒ…"></a>ç”Ÿäº§ç¯å¢ƒé’±åŒ…</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ ç”Ÿäº§ç¯å¢ƒç»ä¸è¿™æ ·åš</span></span><br><span class="line"><span class="keyword">const</span> hardcodedWallet = <span class="keyword">new</span> anchor.<span class="title class_">Wallet</span>(keypair);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… ç”Ÿäº§ç¯å¢ƒæ¨èåšæ³•</span></span><br><span class="line"><span class="keyword">const</span> wallet = <span class="keyword">new</span> anchor.<span class="title class_">Wallet</span>(</span><br><span class="line">    anchor.<span class="property">web3</span>.<span class="property">Keypair</span>.<span class="title function_">fromSecretKey</span>(</span><br><span class="line">        <span class="title class_">Buffer</span>.<span class="title function_">from</span>(process.<span class="property">env</span>.<span class="property">PRIVATE_KEY</span>, <span class="string">&#x27;base64&#x27;</span>)</span><br><span class="line">    )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="æ­¥éª¤2-å®ç°åœ°å€æ´¾ç”Ÿå·¥å…·å‡½æ•°"><a href="#æ­¥éª¤2-å®ç°åœ°å€æ´¾ç”Ÿå·¥å…·å‡½æ•°" class="headerlink" title="æ­¥éª¤2: å®ç°åœ°å€æ´¾ç”Ÿå·¥å…·å‡½æ•°"></a>æ­¥éª¤2: å®ç°åœ°å€æ´¾ç”Ÿå·¥å…·å‡½æ•°</h2><p><strong>ç›®çš„</strong>ï¼šå®ç°PDAï¼ˆç¨‹åºæ´¾ç”Ÿåœ°å€ï¼‰çš„è®¡ç®—é€»è¾‘ï¼Œç¡®ä¿å®¢æˆ·ç«¯èƒ½æ­£ç¡®æ‰¾åˆ°é“¾ä¸Šçš„ETFè´¦æˆ·ã€‚</p>
<p><strong>æ–‡ä»¶ä½ç½®</strong>ï¼š<code>../ibuidl-etf-dapp/anchor/example/api/address.ts</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; program &#125; <span class="keyword">from</span> <span class="string">&quot;./const&quot;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> anchor <span class="keyword">from</span> <span class="string">&quot;@coral-xyz/anchor&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PublicKey</span>&#125; <span class="keyword">from</span> <span class="string">&quot;@solana/web3.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ­ æ´¾ç”ŸETFä»£å¸çš„mintè´¦æˆ·åœ°å€</span></span><br><span class="line"><span class="comment">// è¿™ä¸ªå‡½æ•°è®¡ç®—ETFä»£å¸mintè´¦æˆ·çš„PDAåœ°å€</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">deriveEtfTokenMintAccount</span>(<span class="params"><span class="attr">symbol</span>: <span class="built_in">string</span></span>): [anchor.<span class="property">web3</span>.<span class="property">PublicKey</span>, <span class="built_in">number</span>] &#123;</span><br><span class="line">    <span class="comment">// ğŸ” ä½¿ç”¨findProgramAddressSyncå¯»æ‰¾æœ‰æ•ˆçš„PDA</span></span><br><span class="line">    <span class="comment">// è¿™ä¸ªå‡½æ•°ä¼šå°è¯•ä¸åŒçš„bumpå€¼ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆçš„åœ°å€</span></span><br><span class="line">    <span class="keyword">return</span> anchor.<span class="property">web3</span>.<span class="property">PublicKey</span>.<span class="title function_">findProgramAddressSync</span>(</span><br><span class="line">        [</span><br><span class="line">            <span class="comment">// ğŸ·ï¸ ç§å­1ï¼šå›ºå®šçš„ç±»å‹æ ‡è¯†ç¬¦</span></span><br><span class="line">            <span class="comment">// å¿…é¡»ä¸Rustç¨‹åºä¸­å®šä¹‰çš„SEED_PREFIXå®Œå…¨ä¸€è‡´</span></span><br><span class="line">            <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&quot;etf_token_v3&quot;</span>),</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// ğŸ·ï¸ ç§å­2ï¼šä»£å¸ç¬¦å·ï¼Œç¡®ä¿æ¯ä¸ªç¬¦å·éƒ½æœ‰å”¯ä¸€åœ°å€</span></span><br><span class="line">            <span class="comment">// å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºBufferï¼Œä½œä¸ºPDAç§å­çš„ä¸€éƒ¨åˆ†</span></span><br><span class="line">            <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="built_in">symbol</span>)</span><br><span class="line">        ],</span><br><span class="line">        program.<span class="property">programId</span>, <span class="comment">// ä½¿ç”¨æˆ‘ä»¬ç¨‹åºçš„IDæ¥æ´¾ç”Ÿåœ°å€</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ—‚ï¸ æ´¾ç”ŸETFä¿¡æ¯å­˜å‚¨è´¦æˆ·åœ°å€</span></span><br><span class="line"><span class="comment">// æ”¯æŒä¸¤ç§è°ƒç”¨æ–¹å¼ï¼šé€šè¿‡symbolæˆ–ç›´æ¥é€šè¿‡mintAccount</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">deriveEtfTokenInfoAccount</span>(<span class="params"><span class="attr">symbol</span>: <span class="built_in">string</span></span>): [anchor.<span class="property">web3</span>.<span class="property">PublicKey</span>, <span class="built_in">number</span>];</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">deriveEtfTokenInfoAccount</span>(<span class="params"><span class="attr">mintAccount</span>: <span class="title class_">PublicKey</span></span>): [anchor.<span class="property">web3</span>.<span class="property">PublicKey</span>, <span class="built_in">number</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ“‹ å‡½æ•°é‡è½½çš„å…·ä½“å®ç°</span></span><br><span class="line"><span class="comment">// TypeScriptçš„å‡½æ•°é‡è½½å…è®¸åŒä¸€å‡½æ•°æ¥å—ä¸åŒç±»å‹çš„å‚æ•°</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">deriveEtfTokenInfoAccount</span>(<span class="params"><span class="attr">seeds</span>: <span class="built_in">string</span> | <span class="title class_">PublicKey</span></span>): [anchor.<span class="property">web3</span>.<span class="property">PublicKey</span>, <span class="built_in">number</span>] &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">mintAccount</span>: <span class="title class_">PublicKey</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ”€ æ ¹æ®å‚æ•°ç±»å‹è¿›è¡Œä¸åŒå¤„ç†</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> seeds === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœä¼ å…¥çš„æ˜¯å­—ç¬¦ä¸²ï¼ˆsymbolï¼‰ï¼Œå…ˆæ´¾ç”Ÿå¯¹åº”çš„mintè´¦æˆ·åœ°å€</span></span><br><span class="line">        [mintAccount,] = <span class="title function_">deriveEtfTokenMintAccount</span>(seeds);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœä¼ å…¥çš„æ˜¯PublicKeyï¼Œç›´æ¥ä½¿ç”¨</span></span><br><span class="line">        mintAccount = seeds;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ—ï¸ ä½¿ç”¨mintè´¦æˆ·åœ°å€ä½œä¸ºç§å­æ´¾ç”ŸETFä¿¡æ¯è´¦æˆ·åœ°å€</span></span><br><span class="line">    <span class="comment">// è¿™ç¡®ä¿äº†æ¯ä¸ªETFçš„ä¿¡æ¯è´¦æˆ·ä¸å…¶mintè´¦æˆ·å”¯ä¸€å…³è”</span></span><br><span class="line">    <span class="keyword">return</span> anchor.<span class="property">web3</span>.<span class="property">PublicKey</span>.<span class="title function_">findProgramAddressSync</span>(</span><br><span class="line">        [</span><br><span class="line">            <span class="comment">// ğŸ·ï¸ ç§å­1ï¼šå›ºå®šçš„ç±»å‹æ ‡è¯†ç¬¦</span></span><br><span class="line">            <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&quot;etf_token_v3&quot;</span>),</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// ğŸ·ï¸ ç§å­2ï¼šmintè´¦æˆ·åœ°å€ï¼Œå»ºç«‹å…³è”å…³ç³»</span></span><br><span class="line">            mintAccount.<span class="title function_">toBuffer</span>()</span><br><span class="line">        ],</span><br><span class="line">        program.<span class="property">programId</span>, <span class="comment">// ä½¿ç”¨ç¨‹åºIDæ´¾ç”Ÿ</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>PDAæœºåˆ¶æ·±åº¦è§£æ</strong>ï¼š</p>
<h3 id="1-PDAçš„å·¥ä½œåŸç†"><a href="#1-PDAçš„å·¥ä½œåŸç†" class="headerlink" title="1. PDAçš„å·¥ä½œåŸç†"></a>1. PDAçš„å·¥ä½œåŸç†</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">PublicKey</span>.<span class="title function_">findProgramAddressSync</span>(seeds, programId)</span><br></pre></td></tr></table></figure>

<p><strong>å¯»å€è¿‡ç¨‹</strong>ï¼š</p>
<ol>
<li>å°†ç§å­å’Œç¨‹åºIDç»„åˆ</li>
<li>å°è¯•ä¸åŒçš„bumpå€¼ï¼ˆ255åˆ°0ï¼‰</li>
<li>æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸åœ¨Ed25519æ›²çº¿ä¸Šçš„ç‚¹</li>
<li>è¿”å›åœ°å€å’Œå¯¹åº”çš„bumpå€¼</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦bumpå€¼</strong>ï¼Ÿ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°å­¦åŸç†ï¼šç¡®ä¿åœ°å€ä¸åœ¨æ¤­åœ†æ›²çº¿ä¸Š</span></span><br><span class="line"><span class="comment">// è¿™æ ·å°±æ— æ³•ç”Ÿæˆå¯¹åº”çš„ç§é’¥ï¼Œåªæœ‰ç¨‹åºèƒ½æ§åˆ¶è¿™ä¸ªåœ°å€</span></span><br><span class="line"><span class="keyword">const</span> [pda, bump] = <span class="title class_">PublicKey</span>.<span class="title function_">findProgramAddressSync</span>(seeds, programId);</span><br></pre></td></tr></table></figure>

<h3 id="2-ç§å­è®¾è®¡çš„é‡è¦æ€§"><a href="#2-ç§å­è®¾è®¡çš„é‡è¦æ€§" class="headerlink" title="2. ç§å­è®¾è®¡çš„é‡è¦æ€§"></a>2. ç§å­è®¾è®¡çš„é‡è¦æ€§</h3><h4 id="å”¯ä¸€æ€§ä¿è¯"><a href="#å”¯ä¸€æ€§ä¿è¯" class="headerlink" title="å”¯ä¸€æ€§ä¿è¯"></a>å”¯ä¸€æ€§ä¿è¯</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âœ… å¥½çš„ç§å­è®¾è®¡</span></span><br><span class="line">[<span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&quot;etf_token_v3&quot;</span>), <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="built_in">symbol</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// âŒ å¯èƒ½å†²çªçš„è®¾è®¡</span></span><br><span class="line">[<span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&quot;etf&quot;</span>), <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="built_in">symbol</span>)]</span><br></pre></td></tr></table></figure>

<h4 id="ç‰ˆæœ¬ç®¡ç†"><a href="#ç‰ˆæœ¬ç®¡ç†" class="headerlink" title="ç‰ˆæœ¬ç®¡ç†"></a>ç‰ˆæœ¬ç®¡ç†</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ”¯æŒç¨‹åºå‡çº§æ—¶çš„æ•°æ®è¿ç§»</span></span><br><span class="line"><span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&quot;etf_token_v3&quot;</span>) <span class="comment">// v3ç‰ˆæœ¬çš„ETFç»“æ„</span></span><br></pre></td></tr></table></figure>

<h3 id="3-å‡½æ•°é‡è½½çš„ä¼˜åŠ¿"><a href="#3-å‡½æ•°é‡è½½çš„ä¼˜åŠ¿" class="headerlink" title="3. å‡½æ•°é‡è½½çš„ä¼˜åŠ¿"></a>3. å‡½æ•°é‡è½½çš„ä¼˜åŠ¿</h3><h4 id="çµæ´»æ€§"><a href="#çµæ´»æ€§" class="headerlink" title="çµæ´»æ€§"></a>çµæ´»æ€§</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸¤ç§è°ƒç”¨æ–¹å¼éƒ½æ”¯æŒ</span></span><br><span class="line"><span class="keyword">const</span> [infoAccount1] = <span class="title function_">deriveEtfTokenInfoAccount</span>(<span class="string">&quot;TECH&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> [infoAccount2] = <span class="title function_">deriveEtfTokenInfoAccount</span>(mintAccount);</span><br></pre></td></tr></table></figure>

<h4 id="ç±»å‹å®‰å…¨"><a href="#ç±»å‹å®‰å…¨" class="headerlink" title="ç±»å‹å®‰å…¨"></a>ç±»å‹å®‰å…¨</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TypeScriptä¼šè¿›è¡Œç±»å‹æ£€æŸ¥</span></span><br><span class="line"><span class="title function_">deriveEtfTokenInfoAccount</span>(<span class="number">123</span>); <span class="comment">// âŒ ç¼–è¯‘é”™è¯¯</span></span><br><span class="line"><span class="title function_">deriveEtfTokenInfoAccount</span>(<span class="string">&quot;TECH&quot;</span>); <span class="comment">// âœ… æ­£ç¡®</span></span><br></pre></td></tr></table></figure>

<h2 id="æ­¥éª¤3-å®ç°ETFä»£å¸åˆ›å»ºé€»è¾‘"><a href="#æ­¥éª¤3-å®ç°ETFä»£å¸åˆ›å»ºé€»è¾‘" class="headerlink" title="æ­¥éª¤3: å®ç°ETFä»£å¸åˆ›å»ºé€»è¾‘"></a>æ­¥éª¤3: å®ç°ETFä»£å¸åˆ›å»ºé€»è¾‘</h2><p><strong>ç›®çš„</strong>ï¼šå®ç°å®Œæ•´çš„ETFåˆ›å»ºæµç¨‹ï¼ŒåŒ…æ‹¬å…³è”ä»£å¸è´¦æˆ·åˆ›å»ºã€äº¤æ˜“æ„å»ºå’Œå‘é€ã€‚</p>
<p><strong>æ–‡ä»¶ä½ç½®</strong>ï¼š<code>../ibuidl-etf-dapp/anchor/example/api/etf_token.ts</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; program, provider &#125; <span class="keyword">from</span> <span class="string">&quot;./const&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> anchor <span class="keyword">from</span> <span class="string">&quot;@coral-xyz/anchor&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PublicKey</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@solana/web3.js&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  createAssociatedTokenAccountInstruction,</span><br><span class="line">  getAccount,</span><br><span class="line">  getAssociatedTokenAddressSync,</span><br><span class="line">  getMint,</span><br><span class="line">  <span class="title class_">TokenAccountNotFoundError</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@solana/spl-token&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; deriveEtfTokenMintAccount, deriveEtfTokenInfoAccount &#125; <span class="keyword">from</span> <span class="string">&quot;./address&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ—ï¸ åˆ›å»ºETFä»£å¸mintè´¦æˆ·çš„ä¸»è¦å‡½æ•°</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">createTokenMintAccount</span>(<span class="params"></span></span><br><span class="line"><span class="params">    <span class="attr">wallet</span>: anchor.<span class="title class_">Wallet</span>,      <span class="comment">// äº¤æ˜“ç­¾åè€…çš„é’±åŒ…</span></span></span><br><span class="line"><span class="params">    <span class="attr">name</span>: <span class="built_in">string</span>,               <span class="comment">// ETFåç§°ï¼Œå¦‚&quot;ç§‘æŠ€è‚¡ETF&quot;</span></span></span><br><span class="line"><span class="params">    <span class="attr">symbol</span>: <span class="built_in">string</span>,             <span class="comment">// ETFç¬¦å·ï¼Œå¦‚&quot;TECH&quot;</span></span></span><br><span class="line"><span class="params">    <span class="attr">description</span>: <span class="built_in">string</span>,        <span class="comment">// ETFæè¿°ä¿¡æ¯</span></span></span><br><span class="line"><span class="params">    <span class="attr">url</span>: <span class="built_in">string</span>,               <span class="comment">// å…ƒæ•°æ®JSONæ–‡ä»¶çš„URL</span></span></span><br><span class="line"><span class="params">    <span class="attr">constituent</span>: &#123;token: PublicKey, weight: <span class="built_in">number</span>&#125;[] <span class="comment">// ç»„æˆä»£å¸é…ç½®</span></span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ğŸ¯ æ­¥éª¤1: æ´¾ç”ŸETF mintè´¦æˆ·åœ°å€</span></span><br><span class="line">    <span class="keyword">const</span> [etfAddress] = <span class="title function_">deriveEtfTokenMintAccount</span>(<span class="built_in">symbol</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ETF Address: <span class="subst">$&#123;etfAddress&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ” æ­¥éª¤2: æ£€æŸ¥ETFæ˜¯å¦å·²ç»å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// å°è¯•è·å–mintè´¦æˆ·ä¿¡æ¯</span></span><br><span class="line">        <span class="comment">// å¦‚æœæˆåŠŸï¼Œè¯´æ˜ETFå·²å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">getMint</span>(provider.<span class="property">connection</span>, etfAddress);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ETF already exists, skipping creation&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœå¤±è´¥ï¼Œè¯´æ˜ETFä¸å­˜åœ¨ï¼Œéœ€è¦åˆ›å»º</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ETF not exists, creating it...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ—‚ï¸ æ­¥éª¤3: æ´¾ç”ŸETFä¿¡æ¯å­˜å‚¨è´¦æˆ·åœ°å€</span></span><br><span class="line">    <span class="keyword">const</span> [etfInfoAddress] = <span class="title function_">deriveEtfTokenInfoAccount</span>(etfAddress);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ“‹ æ­¥éª¤4: åˆ›å»ºäº¤æ˜“å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// Transactionç”¨äºåŒ…å«å¤šä¸ªæŒ‡ä»¤ï¼ŒåŸå­æ€§æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">const</span> tx = <span class="keyword">new</span> anchor.<span class="property">web3</span>.<span class="title class_">Transaction</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸª™ æ­¥éª¤5: ä¸ºæ¯ä¸ªç»„æˆä»£å¸åˆ›å»ºå…³è”ä»£å¸è´¦æˆ·</span></span><br><span class="line">    <span class="comment">// å…³è”ä»£å¸è´¦æˆ·ï¼ˆATAï¼‰ç”¨äºETFæŒæœ‰å„ç§åº•å±‚ä»£å¸</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">const</span> &#123;token&#125; <span class="keyword">of</span> constituent) &#123;</span><br><span class="line">        <span class="comment">// ğŸ”— è®¡ç®—å…³è”ä»£å¸è´¦æˆ·åœ°å€</span></span><br><span class="line">        <span class="comment">// getAssociatedTokenAddressSyncæ ¹æ®æ‰€æœ‰è€…å’Œmintè®¡ç®—ATAåœ°å€</span></span><br><span class="line">        <span class="comment">// è¿™é‡ŒETF mintè´¦æˆ·ä½œä¸ºæ‰€æœ‰è€…ï¼Œç»„æˆä»£å¸ä½œä¸ºmint</span></span><br><span class="line">        <span class="keyword">const</span> address = <span class="title function_">getAssociatedTokenAddressSync</span>(</span><br><span class="line">            token,      <span class="comment">// mintè´¦æˆ·ï¼ˆç»„æˆä»£å¸çš„mintï¼‰</span></span><br><span class="line">            etfAddress, <span class="comment">// æ‰€æœ‰è€…ï¼ˆETF mintè´¦æˆ·ï¼‰</span></span><br><span class="line">            <span class="literal">true</span>        <span class="comment">// allowOwnerOffCurve: å…è®¸PDAä½œä¸ºæ‰€æœ‰è€…</span></span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ğŸ” æ£€æŸ¥å…³è”ä»£å¸è´¦æˆ·æ˜¯å¦å·²å­˜åœ¨</span></span><br><span class="line">            <span class="keyword">await</span> <span class="title function_">getAccount</span>(provider.<span class="property">connection</span>, address);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Found existing associated token account: <span class="subst">$&#123;address&#125;</span>`</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            <span class="comment">// ğŸ—ï¸ å¦‚æœè´¦æˆ·ä¸å­˜åœ¨ï¼Œæ·»åŠ åˆ›å»ºæŒ‡ä»¤åˆ°äº¤æ˜“ä¸­</span></span><br><span class="line">            <span class="keyword">if</span> (e <span class="keyword">instanceof</span> <span class="title class_">TokenAccountNotFoundError</span>) &#123;</span><br><span class="line">                tx.<span class="title function_">add</span>(</span><br><span class="line">                    <span class="title function_">createAssociatedTokenAccountInstruction</span>(</span><br><span class="line">                        wallet.<span class="property">payer</span>.<span class="property">publicKey</span>, <span class="comment">// æ”¯ä»˜åˆ›å»ºè´¹ç”¨çš„è´¦æˆ·</span></span><br><span class="line">                        address,                <span class="comment">// è¦åˆ›å»ºçš„ATAåœ°å€</span></span><br><span class="line">                        etfAddress,            <span class="comment">// ATAçš„æ‰€æœ‰è€…ï¼ˆETF mintï¼‰</span></span><br><span class="line">                        token,                 <span class="comment">// ATAå¯¹åº”çš„mintï¼ˆç»„æˆä»£å¸ï¼‰</span></span><br><span class="line">                    )</span><br><span class="line">                );</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Added instruction to create ATA: <span class="subst">$&#123;address&#125;</span>`</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœæ˜¯å…¶ä»–é”™è¯¯ï¼Œé‡æ–°æŠ›å‡º</span></span><br><span class="line">                <span class="keyword">throw</span> e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ¯ æ­¥éª¤6: æ„å»ºETFåˆ›å»ºæŒ‡ä»¤</span></span><br><span class="line">    <span class="keyword">const</span> ix = <span class="keyword">await</span> program.<span class="property">methods</span></span><br><span class="line">        .<span class="title function_">etfTokenCreate</span>(&#123;</span><br><span class="line">            name,           <span class="comment">// ETFåç§°</span></span><br><span class="line">            <span class="built_in">symbol</span>,         <span class="comment">// ETFç¬¦å·</span></span><br><span class="line">            description,    <span class="comment">// ETFæè¿°</span></span><br><span class="line">            url,           <span class="comment">// å…ƒæ•°æ®URL</span></span><br><span class="line">            constituent    <span class="comment">// ç»„æˆä»£å¸é…ç½®</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">transaction</span>(); <span class="comment">// è½¬æ¢ä¸ºTransactionå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// â• æ­¥éª¤7: å°†ETFåˆ›å»ºæŒ‡ä»¤æ·»åŠ åˆ°äº¤æ˜“ä¸­</span></span><br><span class="line">    tx.<span class="title function_">add</span>(ix);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸš€ æ­¥éª¤8: å‘é€å¹¶ç¡®è®¤äº¤æ˜“</span></span><br><span class="line">    <span class="comment">// sendAndConfirmTransactionä¼šç­‰å¾…äº¤æ˜“è¢«ç¡®è®¤åè¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> anchor.<span class="property">web3</span>.<span class="title function_">sendAndConfirmTransaction</span>(</span><br><span class="line">        provider.<span class="property">connection</span>,  <span class="comment">// RPCè¿æ¥</span></span><br><span class="line">        tx,                  <span class="comment">// è¦å‘é€çš„äº¤æ˜“</span></span><br><span class="line">        [wallet.<span class="property">payer</span>]       <span class="comment">// ç­¾åè€…æ•°ç»„</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ ¸å¿ƒæŠ€æœ¯æ¦‚å¿µè§£æ</strong>ï¼š</p>
<h3 id="1-å…³è”ä»£å¸è´¦æˆ·ï¼ˆATAï¼‰æœºåˆ¶"><a href="#1-å…³è”ä»£å¸è´¦æˆ·ï¼ˆATAï¼‰æœºåˆ¶" class="headerlink" title="1. å…³è”ä»£å¸è´¦æˆ·ï¼ˆATAï¼‰æœºåˆ¶"></a>1. å…³è”ä»£å¸è´¦æˆ·ï¼ˆATAï¼‰æœºåˆ¶</h3><h4 id="ä»€ä¹ˆæ˜¯ATAï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ATAï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ATAï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ATAï¼Ÿ</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ataAddress = <span class="title function_">getAssociatedTokenAddressSync</span>(mint, owner, allowOwnerOffCurve);</span><br></pre></td></tr></table></figure>

<p><strong>ATAçš„ä½œç”¨</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªé’±åŒ…å¯¹æ¯ç§ä»£å¸éƒ½æœ‰ä¸€ä¸ªç¡®å®šçš„ATAåœ°å€</li>
<li>ç®€åŒ–ä»£å¸è½¬è´¦ï¼Œæ— éœ€è®°ä½å¤æ‚çš„ä»£å¸è´¦æˆ·åœ°å€</li>
<li>æ ‡å‡†åŒ–ä»£å¸è´¦æˆ·ç®¡ç†</li>
</ul>
<h4 id="ä¸ºä»€ä¹ˆETFéœ€è¦å¤šä¸ªATAï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆETFéœ€è¦å¤šä¸ªATAï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆETFéœ€è¦å¤šä¸ªATAï¼Ÿ"></a>ä¸ºä»€ä¹ˆETFéœ€è¦å¤šä¸ªATAï¼Ÿ</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ETFéœ€è¦æŒæœ‰å¤šç§åº•å±‚ä»£å¸</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> &#123;token&#125; <span class="keyword">of</span> constituent) &#123;</span><br><span class="line">    <span class="keyword">const</span> ataAddress = <span class="title function_">getAssociatedTokenAddressSync</span>(token, etfAddress, <span class="literal">true</span>);</span><br><span class="line">    <span class="comment">// ä¸ºæ¯ç§ç»„æˆä»£å¸åˆ›å»ºå¯¹åº”çš„ATA</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å®é™…åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å¦‚æœETFåŒ…å«SOLã€USDCã€BTCä¸‰ç§ä»£å¸</li>
<li>å°±éœ€è¦åˆ›å»ºä¸‰ä¸ªä¸åŒçš„ATAæ¥åˆ†åˆ«æŒæœ‰è¿™äº›ä»£å¸</li>
</ul>
<h3 id="2-äº¤æ˜“æ„å»ºæ¨¡å¼"><a href="#2-äº¤æ˜“æ„å»ºæ¨¡å¼" class="headerlink" title="2. äº¤æ˜“æ„å»ºæ¨¡å¼"></a>2. äº¤æ˜“æ„å»ºæ¨¡å¼</h3><h4 id="æ‰¹é‡æŒ‡ä»¤æ‰§è¡Œ"><a href="#æ‰¹é‡æŒ‡ä»¤æ‰§è¡Œ" class="headerlink" title="æ‰¹é‡æŒ‡ä»¤æ‰§è¡Œ"></a>æ‰¹é‡æŒ‡ä»¤æ‰§è¡Œ</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> tx = <span class="keyword">new</span> anchor.<span class="property">web3</span>.<span class="title class_">Transaction</span>();</span><br><span class="line">tx.<span class="title function_">add</span>(instruction1);</span><br><span class="line">tx.<span class="title function_">add</span>(instruction2);</span><br><span class="line"><span class="comment">// æ‰€æœ‰æŒ‡ä»¤è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥</span></span><br></pre></td></tr></table></figure>

<p><strong>åŸå­æ€§ä¿è¯</strong>ï¼š</p>
<ul>
<li>å¦‚æœä»»ä½•ä¸€ä¸ªæŒ‡ä»¤å¤±è´¥ï¼Œæ•´ä¸ªäº¤æ˜“å›æ»š</li>
<li>ç¡®ä¿ETFåˆ›å»ºçš„å®Œæ•´æ€§</li>
</ul>
<h4 id="æŒ‡ä»¤é¡ºåºçš„é‡è¦æ€§"><a href="#æŒ‡ä»¤é¡ºåºçš„é‡è¦æ€§" class="headerlink" title="æŒ‡ä»¤é¡ºåºçš„é‡è¦æ€§"></a>æŒ‡ä»¤é¡ºåºçš„é‡è¦æ€§</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âœ… æ­£ç¡®é¡ºåºï¼šå…ˆåˆ›å»ºATAï¼Œå†åˆ›å»ºETF</span></span><br><span class="line">tx.<span class="title function_">add</span>(createATAInstruction);</span><br><span class="line">tx.<span class="title function_">add</span>(createETFInstruction);</span><br><span class="line"></span><br><span class="line"><span class="comment">// âŒ é”™è¯¯é¡ºåºï¼šå¯èƒ½å¯¼è‡´ETFåˆ›å»ºå¤±è´¥</span></span><br><span class="line">tx.<span class="title function_">add</span>(createETFInstruction);</span><br><span class="line">tx.<span class="title function_">add</span>(createATAInstruction);</span><br></pre></td></tr></table></figure>

<h3 id="3-é”™è¯¯å¤„ç†ç­–ç•¥"><a href="#3-é”™è¯¯å¤„ç†ç­–ç•¥" class="headerlink" title="3. é”™è¯¯å¤„ç†ç­–ç•¥"></a>3. é”™è¯¯å¤„ç†ç­–ç•¥</h3><h4 id="å¹‚ç­‰æ€§è®¾è®¡"><a href="#å¹‚ç­‰æ€§è®¾è®¡" class="headerlink" title="å¹‚ç­‰æ€§è®¾è®¡"></a>å¹‚ç­‰æ€§è®¾è®¡</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">getMint</span>(provider.<span class="property">connection</span>, etfAddress);</span><br><span class="line">    <span class="keyword">return</span>; <span class="comment">// ETFå·²å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="comment">// ETFä¸å­˜åœ¨ï¼Œç»§ç»­åˆ›å»º</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å¹‚ç­‰æ€§çš„å¥½å¤„</strong>ï¼š</p>
<ul>
<li>å¤šæ¬¡è°ƒç”¨ç›¸åŒå‚æ•°çš„å‡½æ•°ï¼Œç»“æœä¿æŒä¸€è‡´</li>
<li>é¿å…é‡å¤åˆ›å»ºå¯¼è‡´çš„é”™è¯¯</li>
<li>æé«˜ç³»ç»Ÿå¥å£®æ€§</li>
</ul>
<h4 id="å…·ä½“é”™è¯¯ç±»å‹å¤„ç†"><a href="#å…·ä½“é”™è¯¯ç±»å‹å¤„ç†" class="headerlink" title="å…·ä½“é”™è¯¯ç±»å‹å¤„ç†"></a>å…·ä½“é”™è¯¯ç±»å‹å¤„ç†</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (e <span class="keyword">instanceof</span> <span class="title class_">TokenAccountNotFoundError</span>) &#123;</span><br><span class="line">    <span class="comment">// å…·ä½“çš„é”™è¯¯ç±»å‹ï¼Œé‡‡ç”¨ç›¸åº”çš„å¤„ç†ç­–ç•¥</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> e; <span class="comment">// æœªçŸ¥é”™è¯¯ï¼Œé‡æ–°æŠ›å‡º</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-å¼‚æ­¥æ“ä½œç®¡ç†"><a href="#4-å¼‚æ­¥æ“ä½œç®¡ç†" class="headerlink" title="4. å¼‚æ­¥æ“ä½œç®¡ç†"></a>4. å¼‚æ­¥æ“ä½œç®¡ç†</h3><h4 id="Promiseå¹¶å‘ä¼˜åŒ–"><a href="#Promiseå¹¶å‘ä¼˜åŒ–" class="headerlink" title="Promiseå¹¶å‘ä¼˜åŒ–"></a>Promiseå¹¶å‘ä¼˜åŒ–</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ğŸŒ ä¸²è¡Œæ‰§è¡Œï¼ˆè¾ƒæ…¢ï¼‰</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> &#123;token&#125; <span class="keyword">of</span> constituent) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">checkAndCreateATA</span>(token);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸš€ å¹¶è¡Œæ‰§è¡Œï¼ˆæ›´å¿«ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> promises = constituent.<span class="title function_">map</span>(<span class="function">(<span class="params">&#123;token&#125;</span>) =&gt;</span> <span class="title function_">checkAndCreateATA</span>(token));</span><br><span class="line"><span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(promises);</span><br></pre></td></tr></table></figure>

<p><strong>æ€§èƒ½è€ƒè™‘</strong>ï¼š</p>
<ul>
<li>ç½‘ç»œè¯·æ±‚æ˜¯ä¸»è¦çš„æ€§èƒ½ç“¶é¢ˆ</li>
<li>åˆç†ä½¿ç”¨å¹¶å‘å¯ä»¥æ˜¾è‘—æé«˜é€Ÿåº¦</li>
<li>ä½†è¦æ³¨æ„RPCé™æµé—®é¢˜</li>
</ul>
<h2 id="æ­¥éª¤4-å®ç°å®Œæ•´çš„è°ƒç”¨ç¤ºä¾‹"><a href="#æ­¥éª¤4-å®ç°å®Œæ•´çš„è°ƒç”¨ç¤ºä¾‹" class="headerlink" title="æ­¥éª¤4: å®ç°å®Œæ•´çš„è°ƒç”¨ç¤ºä¾‹"></a>æ­¥éª¤4: å®ç°å®Œæ•´çš„è°ƒç”¨ç¤ºä¾‹</h2><p><strong>ç›®çš„</strong>ï¼šæä¾›å®Œæ•´çš„ETFåˆ›å»ºä½¿ç”¨ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ç»„åˆæ‰€æœ‰åŠŸèƒ½æ¨¡å—ã€‚</p>
<p><strong>æ–‡ä»¶ä½ç½®</strong>ï¼š<code>../ibuidl-etf-dapp/anchor/example/index.ts</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; deriveEtfTokenMintAccount &#125; <span class="keyword">from</span> <span class="string">&quot;./api/address&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useDefaultWallet, useVisitorWallet &#125; <span class="keyword">from</span> <span class="string">&quot;./api/const&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createTokenMintAccount &#125; <span class="keyword">from</span> <span class="string">&quot;./api/etf_token&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> anchor <span class="keyword">from</span> <span class="string">&quot;@coral-xyz/anchor&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸš€ ä¸»å‡½æ•°ï¼šæ¼”ç¤ºETFåˆ›å»ºçš„å®Œæ•´æµç¨‹</span></span><br><span class="line">(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="comment">// ğŸ”‘ æ­¥éª¤1: è·å–é’±åŒ…å®ä¾‹</span></span><br><span class="line">    <span class="keyword">const</span> defaultWallet = <span class="title function_">useDefaultWallet</span>();   <span class="comment">// æœ¬åœ°é»˜è®¤é’±åŒ…</span></span><br><span class="line">    <span class="keyword">const</span> visitorWallet = <span class="title function_">useVisitorWallet</span>();   <span class="comment">// é¢„è®¾çš„æµ‹è¯•é’±åŒ…</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ğŸ“Š æ­¥éª¤2: å®šä¹‰ETFåŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">// è¿™é‡Œåˆ›å»ºä¸€ä¸ªåä¸º&quot;yama3&quot;çš„æµ‹è¯•ETF</span></span><br><span class="line">    <span class="keyword">const</span> [name, <span class="built_in">symbol</span>, description, url] = [</span><br><span class="line">        <span class="string">&quot;yama3&quot;</span>,                    <span class="comment">// ETFåç§°</span></span><br><span class="line">        <span class="string">&quot;YAMA3&quot;</span>,                   <span class="comment">// ETFäº¤æ˜“ç¬¦å·</span></span><br><span class="line">        <span class="string">&quot;yama3 description&quot;</span>,       <span class="comment">// ETFæè¿°</span></span><br><span class="line">        <span class="string">&quot;https://note-public-img.oss-cn-beijing.aliyuncs.com/nya/nya.json&quot;</span> <span class="comment">// å…ƒæ•°æ®URL</span></span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// ğŸ—ï¸ æ­¥éª¤3: è°ƒç”¨åˆ›å»ºå‡½æ•°</span></span><br><span class="line">        <span class="keyword">const</span> transactionSignature = <span class="keyword">await</span> <span class="title function_">createTokenMintAccount</span>(</span><br><span class="line">            defaultWallet,  <span class="comment">// ä½¿ç”¨é»˜è®¤é’±åŒ…ç­¾åäº¤æ˜“</span></span><br><span class="line">            name,           <span class="comment">// ETFåç§°</span></span><br><span class="line">            <span class="built_in">symbol</span>,         <span class="comment">// ETFç¬¦å·</span></span><br><span class="line">            description,    <span class="comment">// ETFæè¿°</span></span><br><span class="line">            url,           <span class="comment">// å…ƒæ•°æ®URL</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// ğŸ“ˆ ETFç»„æˆé…ç½®ï¼šå®šä¹‰åŒ…å«å“ªäº›ä»£å¸åŠå…¶æƒé‡</span></span><br><span class="line">            [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// ç¬¬ä¸€ä¸ªç»„æˆä»£å¸ï¼šå 10%æƒé‡</span></span><br><span class="line">                    <span class="attr">token</span>: <span class="keyword">new</span> anchor.<span class="property">web3</span>.<span class="title class_">PublicKey</span>(<span class="string">&quot;7mAKyqdEovoH5VJaRCFRVAuo4dHH2sk79s2pvxjF24mM&quot;</span>),</span><br><span class="line">                    <span class="attr">weight</span>: <span class="number">10</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// ç¬¬äºŒä¸ªç»„æˆä»£å¸ï¼šå 90%æƒé‡</span></span><br><span class="line">                    <span class="attr">token</span>: <span class="keyword">new</span> anchor.<span class="property">web3</span>.<span class="title class_">PublicKey</span>(<span class="string">&quot;9z65UmYiVSpFbLHqA5di8K8ZvHkqAXdKd7NroNWdemZJ&quot;</span>),</span><br><span class="line">                    <span class="attr">weight</span>: <span class="number">90</span>,</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// âœ… æˆåŠŸå¤„ç†</span></span><br><span class="line">        <span class="keyword">if</span> (transactionSignature) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ğŸ‰ ETFåˆ›å»ºæˆåŠŸ!&quot;</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ğŸ“‹ äº¤æ˜“ç­¾å: <span class="subst">$&#123;transactionSignature&#125;</span>`</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// ğŸ”— æ´¾ç”ŸETFåœ°å€ç”¨äºéªŒè¯</span></span><br><span class="line">            <span class="keyword">const</span> [etfMintAddress] = <span class="title function_">deriveEtfTokenMintAccount</span>(<span class="built_in">symbol</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ğŸ·ï¸  ETF Mintåœ°å€: <span class="subst">$&#123;etfMintAddress.toString()&#125;</span>`</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// ğŸŒ æä¾›Solana Exploreré“¾æ¥</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ğŸ” åœ¨Explorerä¸­æŸ¥çœ‹: https://explorer.solana.com/tx/<span class="subst">$&#123;transactionSignature&#125;</span>?cluster=devnet`</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;â„¹ï¸  ETFå·²å­˜åœ¨ï¼Œè·³è¿‡åˆ›å»º&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="comment">// âŒ é”™è¯¯å¤„ç†</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;ğŸ’¥ ETFåˆ›å»ºå¤±è´¥:&quot;</span>, error);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ğŸ” è¯¦ç»†é”™è¯¯ä¿¡æ¯åˆ†æ</span></span><br><span class="line">        <span class="keyword">if</span> (error <span class="keyword">instanceof</span> anchor.<span class="property">web3</span>.<span class="property">SendTransactionError</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;ğŸ“‹ äº¤æ˜“é”™è¯¯è¯¦æƒ…:&quot;</span>, error.<span class="property">logs</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">message</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;ğŸ“ é”™è¯¯æ¶ˆæ¯:&quot;</span>, error.<span class="property">message</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p><strong>å®Œæ•´æµç¨‹åˆ†æ</strong>ï¼š</p>
<h3 id="1-é’±åŒ…é€‰æ‹©ç­–ç•¥"><a href="#1-é’±åŒ…é€‰æ‹©ç­–ç•¥" class="headerlink" title="1. é’±åŒ…é€‰æ‹©ç­–ç•¥"></a>1. é’±åŒ…é€‰æ‹©ç­–ç•¥</h3><h4 id="å¼€å‘ç¯å¢ƒvsæµ‹è¯•ç¯å¢ƒ"><a href="#å¼€å‘ç¯å¢ƒvsæµ‹è¯•ç¯å¢ƒ" class="headerlink" title="å¼€å‘ç¯å¢ƒvsæµ‹è¯•ç¯å¢ƒ"></a>å¼€å‘ç¯å¢ƒvsæµ‹è¯•ç¯å¢ƒ</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ğŸ  å¼€å‘ç¯å¢ƒï¼šä½¿ç”¨æœ¬åœ°é…ç½®çš„é’±åŒ…</span></span><br><span class="line"><span class="keyword">const</span> wallet = <span class="title function_">useDefaultWallet</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ§ª æµ‹è¯•ç¯å¢ƒï¼šä½¿ç”¨é¢„è®¾çš„æµ‹è¯•é’±åŒ…</span></span><br><span class="line"><span class="keyword">const</span> wallet = <span class="title function_">useVisitorWallet</span>();</span><br></pre></td></tr></table></figure>

<p><strong>é€‰æ‹©åŸåˆ™</strong>ï¼š</p>
<ul>
<li><strong>å¼€å‘ç¯å¢ƒ</strong>ï¼šä½¿ç”¨<code>solana-keygen new</code>åˆ›å»ºçš„æœ¬åœ°é’±åŒ…</li>
<li><strong>æµ‹è¯•ç¯å¢ƒ</strong>ï¼šä½¿ç”¨å›ºå®šçš„æµ‹è¯•é’±åŒ…ç¡®ä¿ç»“æœå¯é‡ç°</li>
<li><strong>ç”Ÿäº§ç¯å¢ƒ</strong>ï¼šä½¿ç”¨ç¡¬ä»¶é’±åŒ…æˆ–å®‰å…¨çš„å¯†é’¥ç®¡ç†æœåŠ¡</li>
</ul>
<h3 id="2-ETFé…ç½®è®¾è®¡"><a href="#2-ETFé…ç½®è®¾è®¡" class="headerlink" title="2. ETFé…ç½®è®¾è®¡"></a>2. ETFé…ç½®è®¾è®¡</h3><h4 id="æƒé‡é…ç½®ç­–ç•¥"><a href="#æƒé‡é…ç½®ç­–ç•¥" class="headerlink" title="æƒé‡é…ç½®ç­–ç•¥"></a>æƒé‡é…ç½®ç­–ç•¥</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123; <span class="attr">token</span>: tokenA, <span class="attr">weight</span>: <span class="number">10</span> &#125;,  <span class="comment">// 10%</span></span><br><span class="line">    &#123; <span class="attr">token</span>: tokenB, <span class="attr">weight</span>: <span class="number">90</span> &#125;,  <span class="comment">// 90%</span></span><br><span class="line">]</span><br><span class="line"><span class="comment">// æ€»æƒé‡ï¼š100%</span></span><br></pre></td></tr></table></figure>

<p><strong>å®é™…åº”ç”¨åœºæ™¯</strong>ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ğŸ¢ ç§‘æŠ€è‚¡ETFé…ç½®</span></span><br><span class="line">[</span><br><span class="line">    &#123; <span class="attr">token</span>: <span class="variable constant_">AAPL_MINT</span>, <span class="attr">weight</span>: <span class="number">30</span> &#125;, <span class="comment">// è‹¹æœ30%</span></span><br><span class="line">    &#123; <span class="attr">token</span>: <span class="variable constant_">MSFT_MINT</span>, <span class="attr">weight</span>: <span class="number">25</span> &#125;, <span class="comment">// å¾®è½¯25%</span></span><br><span class="line">    &#123; <span class="attr">token</span>: <span class="variable constant_">GOOGL_MINT</span>, <span class="attr">weight</span>: <span class="number">20</span> &#125;, <span class="comment">// è°·æ­Œ20%</span></span><br><span class="line">    &#123; <span class="attr">token</span>: <span class="variable constant_">TSLA_MINT</span>, <span class="attr">weight</span>: <span class="number">15</span> &#125;, <span class="comment">// ç‰¹æ–¯æ‹‰15%</span></span><br><span class="line">    &#123; <span class="attr">token</span>: <span class="variable constant_">NVDA_MINT</span>, <span class="attr">weight</span>: <span class="number">10</span> &#125;, <span class="comment">// è‹±ä¼Ÿè¾¾10%</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ’° ç¨³å®šå¸ETFé…ç½®</span></span><br><span class="line">[</span><br><span class="line">    &#123; <span class="attr">token</span>: <span class="variable constant_">USDC_MINT</span>, <span class="attr">weight</span>: <span class="number">40</span> &#125;, <span class="comment">// USDC 40%</span></span><br><span class="line">    &#123; <span class="attr">token</span>: <span class="variable constant_">USDT_MINT</span>, <span class="attr">weight</span>: <span class="number">30</span> &#125;, <span class="comment">// USDT 30%</span></span><br><span class="line">    &#123; <span class="attr">token</span>: <span class="variable constant_">DAI_MINT</span>, <span class="attr">weight</span>: <span class="number">20</span> &#125;,  <span class="comment">// DAI 20%</span></span><br><span class="line">    &#123; <span class="attr">token</span>: <span class="variable constant_">BUSD_MINT</span>, <span class="attr">weight</span>: <span class="number">10</span> &#125;, <span class="comment">// BUSD 10%</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="3-é”™è¯¯å¤„ç†å’Œè°ƒè¯•"><a href="#3-é”™è¯¯å¤„ç†å’Œè°ƒè¯•" class="headerlink" title="3. é”™è¯¯å¤„ç†å’Œè°ƒè¯•"></a>3. é”™è¯¯å¤„ç†å’Œè°ƒè¯•</h3><h4 id="äº¤æ˜“å¤±è´¥åˆ†æ"><a href="#äº¤æ˜“å¤±è´¥åˆ†æ" class="headerlink" title="äº¤æ˜“å¤±è´¥åˆ†æ"></a>äº¤æ˜“å¤±è´¥åˆ†æ</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (error <span class="keyword">instanceof</span> anchor.<span class="property">web3</span>.<span class="property">SendTransactionError</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Transaction logs:&quot;</span>, error.<span class="property">logs</span>);</span><br><span class="line">    <span class="comment">// é€šè¿‡æ—¥å¿—åˆ†æå…·ä½“çš„å¤±è´¥åŸå› </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å¸¸è§é”™è¯¯ç±»å‹</strong>ï¼š</p>
<ol>
<li><strong>ä½™é¢ä¸è¶³</strong>ï¼šé’±åŒ…SOLä½™é¢ä¸å¤Ÿæ”¯ä»˜äº¤æ˜“è´¹ç”¨</li>
<li><strong>è´¦æˆ·å·²å­˜åœ¨</strong>ï¼šå°è¯•åˆ›å»ºå·²å­˜åœ¨çš„è´¦æˆ·</li>
<li><strong>æƒé™é”™è¯¯</strong>ï¼šç­¾åè€…æƒé™ä¸è¶³</li>
<li><strong>ç½‘ç»œé”™è¯¯</strong>ï¼šRPCè¿æ¥è¶…æ—¶æˆ–å¤±è´¥</li>
</ol>
<h4 id="è°ƒè¯•æŠ€å·§"><a href="#è°ƒè¯•æŠ€å·§" class="headerlink" title="è°ƒè¯•æŠ€å·§"></a>è°ƒè¯•æŠ€å·§</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ğŸ” æ·»åŠ è¯¦ç»†æ—¥å¿—</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Creating ETF with config:&quot;</span>, &#123;</span><br><span class="line">    name, <span class="built_in">symbol</span>, description,</span><br><span class="line">    <span class="attr">constituent</span>: constituent.<span class="title function_">map</span>(<span class="function"><span class="params">c</span> =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">token</span>: c.<span class="property">token</span>.<span class="title function_">toString</span>(),</span><br><span class="line">        <span class="attr">weight</span>: c.<span class="property">weight</span></span><br><span class="line">    &#125;))</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ“Š æ£€æŸ¥æƒé‡æ€»å’Œ</span></span><br><span class="line"><span class="keyword">const</span> totalWeight = constituent.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, c</span>) =&gt;</span> sum + c.<span class="property">weight</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Total weight: <span class="subst">$&#123;totalWeight&#125;</span>%`</span>);</span><br></pre></td></tr></table></figure>

<h2 id="é«˜çº§åŠŸèƒ½å’Œä¼˜åŒ–å»ºè®®"><a href="#é«˜çº§åŠŸèƒ½å’Œä¼˜åŒ–å»ºè®®" class="headerlink" title="é«˜çº§åŠŸèƒ½å’Œä¼˜åŒ–å»ºè®®"></a>é«˜çº§åŠŸèƒ½å’Œä¼˜åŒ–å»ºè®®</h2><h3 id="1-é…ç½®éªŒè¯"><a href="#1-é…ç½®éªŒè¯" class="headerlink" title="1. é…ç½®éªŒè¯"></a>1. é…ç½®éªŒè¯</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ åˆ°createTokenMintAccountå‡½æ•°å¼€å¤´</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">validateETFConfig</span>(<span class="params"></span></span><br><span class="line"><span class="params">    <span class="attr">name</span>: <span class="built_in">string</span>, </span></span><br><span class="line"><span class="params">    <span class="attr">symbol</span>: <span class="built_in">string</span>, </span></span><br><span class="line"><span class="params">    <span class="attr">constituent</span>: &#123;token: PublicKey, weight: <span class="built_in">number</span>&#125;[]</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// éªŒè¯åç§°é•¿åº¦</span></span><br><span class="line">    <span class="keyword">if</span> (name.<span class="property">length</span> === <span class="number">0</span> || name.<span class="property">length</span> &gt; <span class="number">50</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;ETFåç§°é•¿åº¦å¿…é¡»åœ¨1-50ä¸ªå­—ç¬¦ä¹‹é—´&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éªŒè¯ç¬¦å·æ ¼å¼</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="regexp">/^[A-Z]&#123;2,10&#125;$/</span>.<span class="title function_">test</span>(<span class="built_in">symbol</span>)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;ETFç¬¦å·å¿…é¡»æ˜¯2-10ä¸ªå¤§å†™å­—æ¯&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éªŒè¯æƒé‡æ€»å’Œ</span></span><br><span class="line">    <span class="keyword">const</span> totalWeight = constituent.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, c</span>) =&gt;</span> sum + c.<span class="property">weight</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (totalWeight !== <span class="number">100</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`æƒé‡æ€»å’Œå¿…é¡»ä¸º100%ï¼Œå½“å‰ä¸º<span class="subst">$&#123;totalWeight&#125;</span>%`</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éªŒè¯æœ€å°‘ç»„æˆä»£å¸æ•°é‡</span></span><br><span class="line">    <span class="keyword">if</span> (constituent.<span class="property">length</span> &lt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;ETFè‡³å°‘éœ€è¦åŒ…å«2ç§ä»£å¸&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éªŒè¯ä»£å¸åœ°å€å”¯ä¸€æ€§</span></span><br><span class="line">    <span class="keyword">const</span> tokenSet = <span class="keyword">new</span> <span class="title class_">Set</span>(constituent.<span class="title function_">map</span>(<span class="function"><span class="params">c</span> =&gt;</span> c.<span class="property">token</span>.<span class="title function_">toString</span>()));</span><br><span class="line">    <span class="keyword">if</span> (tokenSet.<span class="property">size</span> !== constituent.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;ETFä¸èƒ½åŒ…å«é‡å¤çš„ä»£å¸&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-æ‰¹é‡æ“ä½œä¼˜åŒ–"><a href="#2-æ‰¹é‡æ“ä½œä¼˜åŒ–" class="headerlink" title="2. æ‰¹é‡æ“ä½œä¼˜åŒ–"></a>2. æ‰¹é‡æ“ä½œä¼˜åŒ–</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¹¶è¡Œæ£€æŸ¥æ‰€æœ‰ATAè´¦æˆ·</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">checkATAsBatch</span>(<span class="params"></span></span><br><span class="line"><span class="params">    <span class="attr">connection</span>: <span class="title class_">Connection</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">etfAddress</span>: <span class="title class_">PublicKey</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">tokens</span>: <span class="title class_">PublicKey</span>[]</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> ataAddresses = tokens.<span class="title function_">map</span>(<span class="function"><span class="params">token</span> =&gt;</span> </span><br><span class="line">        <span class="title function_">getAssociatedTokenAddressSync</span>(token, etfAddress, <span class="literal">true</span>)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰¹é‡è·å–è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">const</span> accountInfos = <span class="keyword">await</span> connection.<span class="title function_">getMultipleAccountsInfo</span>(ataAddresses);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> ataAddresses.<span class="title function_">map</span>(<span class="function">(<span class="params">address, index</span>) =&gt;</span> (&#123;</span><br><span class="line">        address,</span><br><span class="line">        <span class="attr">exists</span>: accountInfos[index] !== <span class="literal">null</span></span><br><span class="line">    &#125;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-äº¤æ˜“è´¹ç”¨ä¼°ç®—"><a href="#3-äº¤æ˜“è´¹ç”¨ä¼°ç®—" class="headerlink" title="3. äº¤æ˜“è´¹ç”¨ä¼°ç®—"></a>3. äº¤æ˜“è´¹ç”¨ä¼°ç®—</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">estimateCreationCost</span>(<span class="params"></span></span><br><span class="line"><span class="params">    <span class="attr">connection</span>: <span class="title class_">Connection</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">constituent</span>: &#123;token: PublicKey, weight: <span class="built_in">number</span>&#125;[]</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// è·å–å½“å‰çš„ç§Ÿé‡‘è´¹ç‡</span></span><br><span class="line">    <span class="keyword">const</span> rentExemptBalance = <span class="keyword">await</span> connection.<span class="title function_">getMinimumBalanceForRentExemption</span>(<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è®¡ç®—éœ€è¦åˆ›å»ºçš„è´¦æˆ·æ•°é‡</span></span><br><span class="line">    <span class="keyword">const</span> numATAs = constituent.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">const</span> numDataAccounts = <span class="number">2</span>; <span class="comment">// ETF info + mintè´¦æˆ·</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¼°ç®—æ€»æˆæœ¬</span></span><br><span class="line">    <span class="keyword">const</span> estimatedCost = &#123;</span><br><span class="line">        <span class="attr">rent</span>: rentExemptBalance * (numATAs + numDataAccounts),</span><br><span class="line">        <span class="attr">transactionFee</span>: <span class="number">5000</span>, <span class="comment">// çº¦0.000005 SOL</span></span><br><span class="line">        <span class="attr">total</span>: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    estimatedCost.<span class="property">total</span> = estimatedCost.<span class="property">rent</span> + estimatedCost.<span class="property">transactionFee</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> estimatedCost;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-å…ƒæ•°æ®æ ‡å‡†åŒ–"><a href="#4-å…ƒæ•°æ®æ ‡å‡†åŒ–" class="headerlink" title="4. å…ƒæ•°æ®æ ‡å‡†åŒ–"></a>4. å…ƒæ•°æ®æ ‡å‡†åŒ–</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºç¬¦åˆMetaplexæ ‡å‡†çš„å…ƒæ•°æ®JSON</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">generateETFMetadata</span>(<span class="params"></span></span><br><span class="line"><span class="params">    <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">symbol</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">description</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">constituent</span>: &#123;token: PublicKey, weight: <span class="built_in">number</span>&#125;[],</span></span><br><span class="line"><span class="params">    <span class="attr">imageUrl</span>?: <span class="built_in">string</span></span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        name,</span><br><span class="line">        <span class="built_in">symbol</span>,</span><br><span class="line">        description,</span><br><span class="line">        <span class="attr">image</span>: imageUrl || <span class="string">&quot;https://example.com/default-etf-logo.png&quot;</span>,</span><br><span class="line">        <span class="attr">attributes</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">trait_type</span>: <span class="string">&quot;Type&quot;</span>,</span><br><span class="line">                <span class="attr">value</span>: <span class="string">&quot;ETF&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">trait_type</span>: <span class="string">&quot;Components&quot;</span>,</span><br><span class="line">                <span class="attr">value</span>: constituent.<span class="property">length</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">trait_type</span>: <span class="string">&quot;Created&quot;</span>,</span><br><span class="line">                <span class="attr">value</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>()</span><br><span class="line">            &#125;,</span><br><span class="line">            ...constituent.<span class="title function_">map</span>(<span class="function">(<span class="params">comp, index</span>) =&gt;</span> (&#123;</span><br><span class="line">                <span class="attr">trait_type</span>: <span class="string">`Component <span class="subst">$&#123;index + <span class="number">1</span>&#125;</span>`</span>,</span><br><span class="line">                <span class="attr">value</span>: <span class="string">`<span class="subst">$&#123;comp.token.toString().slice(<span class="number">0</span>, <span class="number">8</span>)&#125;</span>... (<span class="subst">$&#123;comp.weight&#125;</span>%)`</span></span><br><span class="line">            &#125;))</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">properties</span>: &#123;</span><br><span class="line">            <span class="attr">category</span>: <span class="string">&quot;ETF&quot;</span>,</span><br><span class="line">            <span class="attr">files</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">uri</span>: imageUrl || <span class="string">&quot;https://example.com/default-etf-logo.png&quot;</span>,</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&quot;image/png&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">constituent</span>: constituent.<span class="title function_">map</span>(<span class="function"><span class="params">comp</span> =&gt;</span> (&#123;</span><br><span class="line">                <span class="attr">token</span>: comp.<span class="property">token</span>.<span class="title function_">toString</span>(),</span><br><span class="line">                <span class="attr">weight</span>: comp.<span class="property">weight</span>,</span><br><span class="line">                <span class="attr">percentage</span>: comp.<span class="property">weight</span> / <span class="number">100</span></span><br><span class="line">            &#125;))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-äº‹ä»¶ç›‘å¬å’ŒçŠ¶æ€è·Ÿè¸ª"><a href="#5-äº‹ä»¶ç›‘å¬å’ŒçŠ¶æ€è·Ÿè¸ª" class="headerlink" title="5. äº‹ä»¶ç›‘å¬å’ŒçŠ¶æ€è·Ÿè¸ª"></a>5. äº‹ä»¶ç›‘å¬å’ŒçŠ¶æ€è·Ÿè¸ª</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›‘å¬ETFåˆ›å»ºäº‹ä»¶</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">watchETFCreation</span>(<span class="params"></span></span><br><span class="line"><span class="params">    <span class="attr">connection</span>: <span class="title class_">Connection</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">etfMintAddress</span>: <span class="title class_">PublicKey</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">callback</span>: (status: <span class="built_in">string</span>) =&gt; <span class="built_in">void</span></span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">callback</span>(<span class="string">&quot;ğŸ” å¼€å§‹ç›‘å¬ETFåˆ›å»ºè¿›åº¦...&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›‘å¬è´¦æˆ·å˜åŒ–</span></span><br><span class="line">    <span class="keyword">const</span> subscriptionId = connection.<span class="title function_">onAccountChange</span>(</span><br><span class="line">        etfMintAddress,</span><br><span class="line">        <span class="function">(<span class="params">accountInfo</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (accountInfo.<span class="property">data</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="title function_">callback</span>(<span class="string">&quot;âœ… ETF Mintè´¦æˆ·åˆ›å»ºæˆåŠŸ!&quot;</span>);</span><br><span class="line">                connection.<span class="title function_">removeAccountChangeListener</span>(subscriptionId);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¶…æ—¶å¤„ç†</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        connection.<span class="title function_">removeAccountChangeListener</span>(subscriptionId);</span><br><span class="line">        <span class="title function_">callback</span>(<span class="string">&quot;â° ç›‘å¬è¶…æ—¶ï¼Œè¯·æ£€æŸ¥äº¤æ˜“çŠ¶æ€&quot;</span>);</span><br><span class="line">    &#125;, <span class="number">30000</span>); <span class="comment">// 30ç§’è¶…æ—¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-äº¤æ˜“é‡è¯•æœºåˆ¶"><a href="#6-äº¤æ˜“é‡è¯•æœºåˆ¶" class="headerlink" title="6. äº¤æ˜“é‡è¯•æœºåˆ¶"></a>6. äº¤æ˜“é‡è¯•æœºåˆ¶</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">createETFWithRetry</span>(<span class="params"></span></span><br><span class="line"><span class="params">    <span class="attr">wallet</span>: anchor.<span class="title class_">Wallet</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">symbol</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">description</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">url</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">    <span class="attr">constituent</span>: &#123;token: PublicKey, weight: <span class="built_in">number</span>&#125;[],</span></span><br><span class="line"><span class="params">    <span class="attr">maxRetries</span>: <span class="built_in">number</span> = <span class="number">3</span></span></span><br><span class="line"><span class="params"></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">string</span> | <span class="literal">undefined</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">lastError</span>: <span class="title class_">Error</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> attempt = <span class="number">1</span>; attempt &lt;= maxRetries; attempt++) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ğŸ”„ å°è¯•åˆ›å»ºETF (ç¬¬<span class="subst">$&#123;attempt&#125;</span>æ¬¡)`</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">createTokenMintAccount</span>(</span><br><span class="line">                wallet, name, <span class="built_in">symbol</span>, description, url, constituent</span><br><span class="line">            );</span><br><span class="line">            </span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`âœ… ç¬¬<span class="subst">$&#123;attempt&#125;</span>æ¬¡å°è¯•æˆåŠŸ!`</span>);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            lastError = error <span class="keyword">as</span> <span class="title class_">Error</span>;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`âŒ ç¬¬<span class="subst">$&#123;attempt&#125;</span>æ¬¡å°è¯•å¤±è´¥: <span class="subst">$&#123;error.message&#125;</span>`</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (attempt &lt; maxRetries) &#123;</span><br><span class="line">                <span class="comment">// æŒ‡æ•°é€€é¿ï¼šç­‰å¾…æ—¶é—´é€æ¸å¢åŠ </span></span><br><span class="line">                <span class="keyword">const</span> waitTime = <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">2</span>, attempt) * <span class="number">1000</span>;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`â³ ç­‰å¾… <span class="subst">$&#123;waitTime&#125;</span>ms åé‡è¯•...`</span>);</span><br><span class="line">                <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(resolve, waitTime));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`åˆ›å»ºå¤±è´¥ï¼Œå·²é‡è¯•<span class="subst">$&#123;maxRetries&#125;</span>æ¬¡: <span class="subst">$&#123;lastError.message&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹é›†åˆ"><a href="#å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹é›†åˆ" class="headerlink" title="å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹é›†åˆ"></a>å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹é›†åˆ</h2><h3 id="1-åˆ›å»ºå¤šæ ·åŒ–çš„ETFç»„åˆ"><a href="#1-åˆ›å»ºå¤šæ ·åŒ–çš„ETFç»„åˆ" class="headerlink" title="1. åˆ›å»ºå¤šæ ·åŒ–çš„ETFç»„åˆ"></a>1. åˆ›å»ºå¤šæ ·åŒ–çš„ETFç»„åˆ</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ğŸ¢ ç§‘æŠ€è‚¡ETF</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">createTechETF</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> techETF = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;Technology Stocks ETF&quot;</span>,</span><br><span class="line">        <span class="attr">symbol</span>: <span class="string">&quot;TECH&quot;</span>,</span><br><span class="line">        <span class="attr">description</span>: <span class="string">&quot;A diversified portfolio of leading technology companies&quot;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&quot;https://your-domain.com/metadata/tech-etf.json&quot;</span>,</span><br><span class="line">        <span class="attr">constituent</span>: [</span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;TokenA_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">30</span> &#125;, <span class="comment">// å¤§å‹ç§‘æŠ€è‚¡</span></span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;TokenB_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">25</span> &#125;, <span class="comment">// äº‘è®¡ç®—</span></span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;TokenC_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">20</span> &#125;, <span class="comment">// äººå·¥æ™ºèƒ½</span></span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;TokenD_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">15</span> &#125;, <span class="comment">// åŠå¯¼ä½“</span></span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;TokenE_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">10</span> &#125;, <span class="comment">// æ–°å…´ç§‘æŠ€</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> <span class="title function_">createTokenMintAccount</span>(</span><br><span class="line">        <span class="title function_">useDefaultWallet</span>(),</span><br><span class="line">        techETF.<span class="property">name</span>,</span><br><span class="line">        techETF.<span class="property">symbol</span>,</span><br><span class="line">        techETF.<span class="property">description</span>,</span><br><span class="line">        techETF.<span class="property">url</span>,</span><br><span class="line">        techETF.<span class="property">constituent</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ¥ åŒ»ç–—å¥åº·ETF</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">createHealthETF</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> healthETF = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;Healthcare Innovation ETF&quot;</span>,</span><br><span class="line">        <span class="attr">symbol</span>: <span class="string">&quot;HEALTH&quot;</span>,</span><br><span class="line">        <span class="attr">description</span>: <span class="string">&quot;Investment in pharmaceutical and biotech companies&quot;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&quot;https://your-domain.com/metadata/health-etf.json&quot;</span>,</span><br><span class="line">        <span class="attr">constituent</span>: [</span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;PharmA_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">35</span> &#125;, <span class="comment">// åˆ¶è¯å·¨å¤´</span></span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;BiotechB_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">25</span> &#125;, <span class="comment">// ç”Ÿç‰©æŠ€æœ¯</span></span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;MedDeviceC_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">20</span> &#125;, <span class="comment">// åŒ»ç–—è®¾å¤‡</span></span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;HealthTechD_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">20</span> &#125;, <span class="comment">// å¥åº·ç§‘æŠ€</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> <span class="title function_">createTokenMintAccount</span>(</span><br><span class="line">        <span class="title function_">useDefaultWallet</span>(),</span><br><span class="line">        healthETF.<span class="property">name</span>,</span><br><span class="line">        healthETF.<span class="property">symbol</span>,</span><br><span class="line">        healthETF.<span class="property">description</span>,</span><br><span class="line">        healthETF.<span class="property">url</span>,</span><br><span class="line">        healthETF.<span class="property">constituent</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ğŸ’° ç¨³å®šæ”¶ç›ŠETF</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">createStableETF</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> stableETF = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;Stable Income ETF&quot;</span>,</span><br><span class="line">        <span class="attr">symbol</span>: <span class="string">&quot;STABLE&quot;</span>,</span><br><span class="line">        <span class="attr">description</span>: <span class="string">&quot;Conservative portfolio focused on stable returns&quot;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&quot;https://your-domain.com/metadata/stable-etf.json&quot;</span>,</span><br><span class="line">        <span class="attr">constituent</span>: [</span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;USDC_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">40</span> &#125;, <span class="comment">// USDCç¨³å®šå¸</span></span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;USDT_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">30</span> &#125;, <span class="comment">// USDTç¨³å®šå¸</span></span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;DAI_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">20</span> &#125;,  <span class="comment">// DAIå»ä¸­å¿ƒåŒ–ç¨³å®šå¸</span></span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;BUSD_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">10</span> &#125;, <span class="comment">// BUSDç¨³å®šå¸</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> <span class="title function_">createTokenMintAccount</span>(</span><br><span class="line">        <span class="title function_">useDefaultWallet</span>(),</span><br><span class="line">        stableETF.<span class="property">name</span>,</span><br><span class="line">        stableETF.<span class="property">symbol</span>,</span><br><span class="line">        stableETF.<span class="property">description</span>,</span><br><span class="line">        stableETF.<span class="property">url</span>,</span><br><span class="line">        stableETF.<span class="property">constituent</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-æ‰¹é‡åˆ›å»ºETF"><a href="#2-æ‰¹é‡åˆ›å»ºETF" class="headerlink" title="2. æ‰¹é‡åˆ›å»ºETF"></a>2. æ‰¹é‡åˆ›å»ºETF</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">createMultipleETFs</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> etfConfigs = [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;DeFi Leaders ETF&quot;</span>,</span><br><span class="line">            <span class="attr">symbol</span>: <span class="string">&quot;DEFI&quot;</span>,</span><br><span class="line">            <span class="attr">description</span>: <span class="string">&quot;Top DeFi protocol tokens&quot;</span>,</span><br><span class="line">            <span class="attr">constituent</span>: [</span><br><span class="line">                &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;UNI_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">25</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;AAVE_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">25</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;COMP_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">25</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;MKR_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">25</span> &#125;,</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;Gaming Tokens ETF&quot;</span>,</span><br><span class="line">            <span class="attr">symbol</span>: <span class="string">&quot;GAME&quot;</span>,</span><br><span class="line">            <span class="attr">description</span>: <span class="string">&quot;Blockchain gaming and metaverse tokens&quot;</span>,</span><br><span class="line">            <span class="attr">constituent</span>: [</span><br><span class="line">                &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;AXS_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">30</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;SAND_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">25</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;MANA_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">25</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&quot;ENJ_PublicKey&quot;</span>), <span class="attr">weight</span>: <span class="number">20</span> &#125;,</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> results = [];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> config <span class="keyword">of</span> etfConfigs) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ğŸš€ åˆ›å»º <span class="subst">$&#123;config.<span class="built_in">symbol</span>&#125;</span> ETF...`</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">createETFWithRetry</span>(</span><br><span class="line">                <span class="title function_">useDefaultWallet</span>(),</span><br><span class="line">                config.<span class="property">name</span>,</span><br><span class="line">                config.<span class="property">symbol</span>,</span><br><span class="line">                config.<span class="property">description</span>,</span><br><span class="line">                <span class="string">`https://your-domain.com/metadata/<span class="subst">$&#123;config.<span class="built_in">symbol</span>.toLowerCase()&#125;</span>-etf.json`</span>,</span><br><span class="line">                config.<span class="property">constituent</span></span><br><span class="line">            );</span><br><span class="line">            </span><br><span class="line">            results.<span class="title function_">push</span>(&#123;</span><br><span class="line">                <span class="attr">symbol</span>: config.<span class="property">symbol</span>,</span><br><span class="line">                <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">transactionSignature</span>: result</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`âœ… <span class="subst">$&#123;config.<span class="built_in">symbol</span>&#125;</span> åˆ›å»ºæˆåŠŸ!`</span>);</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`âŒ <span class="subst">$&#123;config.<span class="built_in">symbol</span>&#125;</span> åˆ›å»ºå¤±è´¥:`</span>, error.<span class="property">message</span>);</span><br><span class="line">            results.<span class="title function_">push</span>(&#123;</span><br><span class="line">                <span class="attr">symbol</span>: config.<span class="property">symbol</span>,</span><br><span class="line">                <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">error</span>: error.<span class="property">message</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// é¿å…RPCé™æµï¼Œåœ¨åˆ›å»ºä¹‹é—´æ·»åŠ å»¶è¿Ÿ</span></span><br><span class="line">        <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(resolve, <span class="number">2000</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> results;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æµ‹è¯•å’Œè°ƒè¯•æŒ‡å—"><a href="#æµ‹è¯•å’Œè°ƒè¯•æŒ‡å—" class="headerlink" title="æµ‹è¯•å’Œè°ƒè¯•æŒ‡å—"></a>æµ‹è¯•å’Œè°ƒè¯•æŒ‡å—</h2><h3 id="1-å•å…ƒæµ‹è¯•ç¤ºä¾‹"><a href="#1-å•å…ƒæµ‹è¯•ç¤ºä¾‹" class="headerlink" title="1. å•å…ƒæµ‹è¯•ç¤ºä¾‹"></a>1. å•å…ƒæµ‹è¯•ç¤ºä¾‹</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; expect &#125; <span class="keyword">from</span> <span class="string">&#x27;chai&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Connection</span>, <span class="title class_">PublicKey</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@solana/web3.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">describe</span>(<span class="string">&#x27;ETF Creation Tests&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">connection</span>: <span class="title class_">Connection</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">before</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        connection = <span class="keyword">new</span> <span class="title class_">Connection</span>(<span class="string">&#x27;https://api.devnet.solana.com&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&#x27;åº”è¯¥æ­£ç¡®æ´¾ç”ŸETF mintåœ°å€&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="built_in">symbol</span> = <span class="string">&#x27;TEST&#x27;</span>;</span><br><span class="line">        <span class="keyword">const</span> [mintAddress, bump] = <span class="title function_">deriveEtfTokenMintAccount</span>(<span class="built_in">symbol</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="title function_">expect</span>(mintAddress).<span class="property">to</span>.<span class="property">be</span>.<span class="title function_">instanceOf</span>(<span class="title class_">PublicKey</span>);</span><br><span class="line">        <span class="title function_">expect</span>(bump).<span class="property">to</span>.<span class="property">be</span>.<span class="title function_">a</span>(<span class="string">&#x27;number&#x27;</span>);</span><br><span class="line">        <span class="title function_">expect</span>(bump).<span class="property">to</span>.<span class="property">be</span>.<span class="property">at</span>.<span class="title function_">least</span>(<span class="number">0</span>).<span class="property">and</span>.<span class="property">at</span>.<span class="title function_">most</span>(<span class="number">255</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&#x27;åº”è¯¥éªŒè¯ETFé…ç½®å‚æ•°&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> validConfig = [</span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&#x27;11111111111111111111111111111112&#x27;</span>), <span class="attr">weight</span>: <span class="number">50</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&#x27;11111111111111111111111111111113&#x27;</span>), <span class="attr">weight</span>: <span class="number">50</span> &#125;,</span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line">        <span class="title function_">expect</span>(<span class="function">() =&gt;</span> <span class="title function_">validateETFConfig</span>(<span class="string">&#x27;TestETF&#x27;</span>, <span class="string">&#x27;TEST&#x27;</span>, validConfig)).<span class="property">to</span>.<span class="property">not</span>.<span class="keyword">throw</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">const</span> invalidConfig = [</span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&#x27;11111111111111111111111111111112&#x27;</span>), <span class="attr">weight</span>: <span class="number">60</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&#x27;11111111111111111111111111111113&#x27;</span>), <span class="attr">weight</span>: <span class="number">50</span> &#125;, <span class="comment">// æ€»å’Œ110%</span></span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line">        <span class="title function_">expect</span>(<span class="function">() =&gt;</span> <span class="title function_">validateETFConfig</span>(<span class="string">&#x27;TestETF&#x27;</span>, <span class="string">&#x27;TEST&#x27;</span>, invalidConfig)).<span class="property">to</span>.<span class="keyword">throw</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="2-é›†æˆæµ‹è¯•"><a href="#2-é›†æˆæµ‹è¯•" class="headerlink" title="2. é›†æˆæµ‹è¯•"></a>2. é›†æˆæµ‹è¯•</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">describe</span>(<span class="string">&#x27;ETF Integration Tests&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&#x27;åº”è¯¥æˆåŠŸåˆ›å»ºå®Œæ•´çš„ETF&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">timeout</span>(<span class="number">60000</span>); <span class="comment">// å¢åŠ è¶…æ—¶æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> testWallet = <span class="title function_">useVisitorWallet</span>();</span><br><span class="line">        <span class="keyword">const</span> <span class="built_in">symbol</span> = <span class="string">`TEST<span class="subst">$&#123;<span class="built_in">Date</span>.now()&#125;</span>`</span>; <span class="comment">// ä½¿ç”¨æ—¶é—´æˆ³ç¡®ä¿å”¯ä¸€æ€§</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">createTokenMintAccount</span>(</span><br><span class="line">            testWallet,</span><br><span class="line">            <span class="string">&#x27;Test ETF&#x27;</span>,</span><br><span class="line">            <span class="built_in">symbol</span>,</span><br><span class="line">            <span class="string">&#x27;Integration test ETF&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;https://example.com/test.json&#x27;</span>,</span><br><span class="line">            [</span><br><span class="line">                &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&#x27;So11111111111111111111111111111111111111112&#x27;</span>), <span class="attr">weight</span>: <span class="number">70</span> &#125;, <span class="comment">// SOL</span></span><br><span class="line">                &#123; <span class="attr">token</span>: <span class="keyword">new</span> <span class="title class_">PublicKey</span>(<span class="string">&#x27;EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v&#x27;</span>), <span class="attr">weight</span>: <span class="number">30</span> &#125;, <span class="comment">// USDC</span></span><br><span class="line">            ]</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="title function_">expect</span>(result).<span class="property">to</span>.<span class="property">be</span>.<span class="title function_">a</span>(<span class="string">&#x27;string&#x27;</span>); <span class="comment">// äº¤æ˜“ç­¾å</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// éªŒè¯ETFç¡®å®è¢«åˆ›å»º</span></span><br><span class="line">        <span class="keyword">const</span> [mintAddress] = <span class="title function_">deriveEtfTokenMintAccount</span>(<span class="built_in">symbol</span>);</span><br><span class="line">        <span class="keyword">const</span> mintInfo = <span class="keyword">await</span> connection.<span class="title function_">getAccountInfo</span>(mintAddress);</span><br><span class="line">        <span class="title function_">expect</span>(mintInfo).<span class="property">to</span>.<span class="property">not</span>.<span class="property">be</span>.<span class="property">null</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ"><a href="#å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ"></a>å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h2><h3 id="1-ä½™é¢ä¸è¶³é—®é¢˜"><a href="#1-ä½™é¢ä¸è¶³é—®é¢˜" class="headerlink" title="1. ä½™é¢ä¸è¶³é—®é¢˜"></a>1. ä½™é¢ä¸è¶³é—®é¢˜</h3><p><strong>é—®é¢˜</strong>ï¼šäº¤æ˜“å¤±è´¥ï¼Œæç¤ºâ€insufficient fundsâ€</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">checkWalletBalance</span>(<span class="params"><span class="attr">wallet</span>: anchor.<span class="title class_">Wallet</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> balance = <span class="keyword">await</span> provider.<span class="property">connection</span>.<span class="title function_">getBalance</span>(wallet.<span class="property">payer</span>.<span class="property">publicKey</span>);</span><br><span class="line">    <span class="keyword">const</span> minRequired = <span class="number">0.1</span> * anchor.<span class="property">web3</span>.<span class="property">LAMPORTS_PER_SOL</span>; <span class="comment">// 0.1 SOL</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (balance &lt; minRequired) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(</span><br><span class="line">            <span class="string">`é’±åŒ…ä½™é¢ä¸è¶³! å½“å‰ä½™é¢: <span class="subst">$&#123;balance / anchor.web3.LAMPORTS_PER_SOL&#125;</span> SOL, `</span> +</span><br><span class="line">            <span class="string">`å»ºè®®æœ€å°‘: <span class="subst">$&#123;minRequired / anchor.web3.LAMPORTS_PER_SOL&#125;</span> SOL`</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`âœ… é’±åŒ…ä½™é¢å……è¶³: <span class="subst">$&#123;balance / anchor.web3.LAMPORTS_PER_SOL&#125;</span> SOL`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-RPCé™æµé—®é¢˜"><a href="#2-RPCé™æµé—®é¢˜" class="headerlink" title="2. RPCé™æµé—®é¢˜"></a>2. RPCé™æµé—®é¢˜</h3><p><strong>é—®é¢˜</strong>ï¼šé¢‘ç¹è°ƒç”¨æ—¶é‡åˆ°429é”™è¯¯</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RateLimitedConnection</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="attr">connection</span>: <span class="title class_">Connection</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="attr">requestQueue</span>: <span class="title class_">Array</span>&lt;<span class="function">() =&gt;</span> <span class="title class_">Promise</span>&lt;<span class="built_in">any</span>&gt;&gt; = [];</span><br><span class="line">    <span class="keyword">private</span> processing = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> requestsPerSecond = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">endpoint</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">connection</span> = <span class="keyword">new</span> <span class="title class_">Connection</span>(endpoint);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> execute&lt;T&gt;(<span class="attr">request</span>: <span class="function">() =&gt;</span> <span class="title class_">Promise</span>&lt;T&gt;): <span class="title class_">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">requestQueue</span>.<span class="title function_">push</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">request</span>();</span><br><span class="line">                    <span class="title function_">resolve</span>(result);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                    <span class="title function_">reject</span>(error);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">processQueue</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">async</span> <span class="title function_">processQueue</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">processing</span> || <span class="variable language_">this</span>.<span class="property">requestQueue</span>.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">processing</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="variable language_">this</span>.<span class="property">requestQueue</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> request = <span class="variable language_">this</span>.<span class="property">requestQueue</span>.<span class="title function_">shift</span>()!;</span><br><span class="line">            <span class="keyword">await</span> <span class="title function_">request</span>();</span><br><span class="line">            <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(resolve, <span class="number">1000</span> / <span class="variable language_">this</span>.<span class="property">requestsPerSecond</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">processing</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-ç½‘ç»œé”™è¯¯å¤„ç†"><a href="#3-ç½‘ç»œé”™è¯¯å¤„ç†" class="headerlink" title="3. ç½‘ç»œé”™è¯¯å¤„ç†"></a>3. ç½‘ç»œé”™è¯¯å¤„ç†</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> robustNetworkCall&lt;T&gt;(</span><br><span class="line">    <span class="attr">operation</span>: <span class="function">() =&gt;</span> <span class="title class_">Promise</span>&lt;T&gt;,</span><br><span class="line">    <span class="attr">maxRetries</span>: <span class="built_in">number</span> = <span class="number">3</span>,</span><br><span class="line">    <span class="attr">baseDelay</span>: <span class="built_in">number</span> = <span class="number">1000</span></span><br><span class="line">): <span class="title class_">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> attempt = <span class="number">1</span>; attempt &lt;= maxRetries; attempt++) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">await</span> <span class="title function_">operation</span>();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="keyword">const</span> isLastAttempt = attempt === maxRetries;</span><br><span class="line">            <span class="keyword">const</span> isNetworkError = error.<span class="property">message</span>.<span class="title function_">includes</span>(<span class="string">&#x27;fetch&#x27;</span>) || </span><br><span class="line">                                  error.<span class="property">message</span>.<span class="title function_">includes</span>(<span class="string">&#x27;network&#x27;</span>) ||</span><br><span class="line">                                  error.<span class="property">code</span> === <span class="string">&#x27;NETWORK_ERROR&#x27;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (isNetworkError &amp;&amp; !isLastAttempt) &#123;</span><br><span class="line">                <span class="keyword">const</span> delay = baseDelay * <span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="number">2</span>, attempt - <span class="number">1</span>);</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ğŸŒ ç½‘ç»œé”™è¯¯ï¼Œ<span class="subst">$&#123;delay&#125;</span>msåé‡è¯•... (<span class="subst">$&#123;attempt&#125;</span>/<span class="subst">$&#123;maxRetries&#125;</span>)`</span>);</span><br><span class="line">                <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(resolve, delay));</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">throw</span> error;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;ä¸åº”è¯¥åˆ°è¾¾è¿™é‡Œ&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ€§èƒ½ä¼˜åŒ–å»ºè®®"><a href="#æ€§èƒ½ä¼˜åŒ–å»ºè®®" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–å»ºè®®"></a>æ€§èƒ½ä¼˜åŒ–å»ºè®®</h2><h3 id="1-å¹¶è¡Œå¤„ç†"><a href="#1-å¹¶è¡Œå¤„ç†" class="headerlink" title="1. å¹¶è¡Œå¤„ç†"></a>1. å¹¶è¡Œå¤„ç†</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ ä¸²è¡Œå¤„ç†ï¼ˆæ…¢ï¼‰</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">createETFsSerially</span>(<span class="params"><span class="attr">configs</span>: <span class="title class_">ETFConfig</span>[]</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> results = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> config <span class="keyword">of</span> configs) &#123;</span><br><span class="line">        <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">createTokenMintAccount</span>(...);</span><br><span class="line">        results.<span class="title function_">push</span>(result);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> results;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… å¹¶è¡Œå¤„ç†ï¼ˆå¿«ï¼‰</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">createETFsParallel</span>(<span class="params"><span class="attr">configs</span>: <span class="title class_">ETFConfig</span>[]</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> promises = configs.<span class="title function_">map</span>(<span class="function"><span class="params">config</span> =&gt;</span> </span><br><span class="line">        <span class="title function_">createTokenMintAccount</span>(...)</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">allSettled</span>(promises);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-ç¼“å­˜æœºåˆ¶"><a href="#2-ç¼“å­˜æœºåˆ¶" class="headerlink" title="2. ç¼“å­˜æœºåˆ¶"></a>2. ç¼“å­˜æœºåˆ¶</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ETFAddressCache</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> cache = <span class="keyword">new</span> <span class="title class_">Map</span>&lt;<span class="built_in">string</span>, <span class="title class_">PublicKey</span>&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getETFMintAddress</span>(<span class="attr">symbol</span>: <span class="built_in">string</span>): <span class="title class_">PublicKey</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">has</span>(<span class="built_in">symbol</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">get</span>(<span class="built_in">symbol</span>)!;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> [address] = <span class="title function_">deriveEtfTokenMintAccount</span>(<span class="built_in">symbol</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">set</span>(<span class="built_in">symbol</span>, address);</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">clear</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">clear</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> addressCache = <span class="keyword">new</span> <span class="title class_">ETFAddressCache</span>();</span><br></pre></td></tr></table></figure>

<h3 id="3-æ‰¹é‡RPCè°ƒç”¨"><a href="#3-æ‰¹é‡RPCè°ƒç”¨" class="headerlink" title="3. æ‰¹é‡RPCè°ƒç”¨"></a>3. æ‰¹é‡RPCè°ƒç”¨</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">batchGetETFInfo</span>(<span class="params"><span class="attr">symbols</span>: <span class="built_in">string</span>[]</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> addresses = symbols.<span class="title function_">map</span>(<span class="function"><span class="params">symbol</span> =&gt;</span> </span><br><span class="line">        addressCache.<span class="title function_">getETFMintAddress</span>(<span class="built_in">symbol</span>)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸€æ¬¡RPCè°ƒç”¨è·å–å¤šä¸ªè´¦æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">const</span> accountInfos = <span class="keyword">await</span> provider.<span class="property">connection</span>.<span class="title function_">getMultipleAccountsInfo</span>(addresses);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> symbols.<span class="title function_">map</span>(<span class="function">(<span class="params"><span class="built_in">symbol</span>, index</span>) =&gt;</span> (&#123;</span><br><span class="line">        <span class="built_in">symbol</span>,</span><br><span class="line">        <span class="attr">address</span>: addresses[index],</span><br><span class="line">        <span class="attr">exists</span>: accountInfos[index] !== <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">data</span>: accountInfos[index]?.<span class="property">data</span></span><br><span class="line">    &#125;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬æ•™ç¨‹è¯¦ç»†ä»‹ç»äº†Solana ETFä»£å¸åˆ›å»ºæŒ‡ä»¤çš„å®Œæ•´å®¢æˆ·ç«¯è°ƒç”¨æµç¨‹ï¼ŒåŒ…æ‹¬ï¼š</p>
<h3 id="ğŸ”§-æŠ€æœ¯æ ˆæŒæ¡"><a href="#ğŸ”§-æŠ€æœ¯æ ˆæŒæ¡" class="headerlink" title="ğŸ”§ æŠ€æœ¯æ ˆæŒæ¡"></a>ğŸ”§ æŠ€æœ¯æ ˆæŒæ¡</h3><ul>
<li><strong>Anchoræ¡†æ¶</strong>ï¼šç°ä»£Solanaå¼€å‘çš„æ ‡å‡†å·¥å…·</li>
<li><strong>TypeScript</strong>ï¼šç±»å‹å®‰å…¨çš„JavaScriptè¶…é›†</li>
<li><strong>SPL Token</strong>ï¼šSolanaçš„ä»£å¸æ ‡å‡†</li>
<li><strong>PDAæœºåˆ¶</strong>ï¼šç¨‹åºæ´¾ç”Ÿåœ°å€çš„åº”ç”¨</li>
</ul>
<h3 id="ğŸ“š-æ ¸å¿ƒæ¦‚å¿µç†è§£"><a href="#ğŸ“š-æ ¸å¿ƒæ¦‚å¿µç†è§£" class="headerlink" title="ğŸ“š æ ¸å¿ƒæ¦‚å¿µç†è§£"></a>ğŸ“š æ ¸å¿ƒæ¦‚å¿µç†è§£</h3><ul>
<li><strong>å…³è”ä»£å¸è´¦æˆ·(ATA)</strong>ï¼šç®€åŒ–ä»£å¸ç®¡ç†çš„æ ‡å‡†åŒ–æœºåˆ¶</li>
<li><strong>äº¤æ˜“åŸå­æ€§</strong>ï¼šç¡®ä¿å¤šæŒ‡ä»¤æ“ä½œçš„ä¸€è‡´æ€§</li>
<li><strong>å…ƒæ•°æ®æ ‡å‡†</strong>ï¼šä¸ç”Ÿæ€ç³»ç»Ÿçš„äº’æ“ä½œæ€§</li>
</ul>
<h3 id="ğŸ› ï¸-å®è·µæŠ€èƒ½åŸ¹å…»"><a href="#ğŸ› ï¸-å®è·µæŠ€èƒ½åŸ¹å…»" class="headerlink" title="ğŸ› ï¸ å®è·µæŠ€èƒ½åŸ¹å…»"></a>ğŸ› ï¸ å®è·µæŠ€èƒ½åŸ¹å…»</h3><ul>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šä¼˜é›…å¤„ç†å„ç§å¼‚å¸¸æƒ…å†µ</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šåˆç†ä½¿ç”¨å¹¶å‘å’Œç¼“å­˜</li>
<li><strong>è°ƒè¯•æŠ€å·§</strong>ï¼šå¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜</li>
</ul>
<h3 id="ğŸš€-æ‰©å±•èƒ½åŠ›å»ºè®¾"><a href="#ğŸš€-æ‰©å±•èƒ½åŠ›å»ºè®¾" class="headerlink" title="ğŸš€ æ‰©å±•èƒ½åŠ›å»ºè®¾"></a>ğŸš€ æ‰©å±•èƒ½åŠ›å»ºè®¾</h3><ul>
<li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šä¾¿äºç»´æŠ¤å’Œæ‰©å±•çš„ä»£ç ç»“æ„</li>
<li><strong>æµ‹è¯•é©±åŠ¨</strong>ï¼šç¡®ä¿ä»£ç è´¨é‡çš„æµ‹è¯•ç­–ç•¥</li>
<li><strong>ç”Ÿäº§å°±ç»ª</strong>ï¼šæ»¡è¶³å®é™…åº”ç”¨éœ€æ±‚çš„å¥å£®æ€§</li>
</ul>
<p>é€šè¿‡æœ¬æ•™ç¨‹çš„å­¦ä¹ ï¼Œä½ å·²ç»å…·å¤‡äº†åœ¨Solanaä¸Šå¼€å‘å¤æ‚DeFiäº§å“çš„åŸºç¡€èƒ½åŠ›ã€‚ETFåˆ›å»ºåªæ˜¯ä¸€ä¸ªèµ·ç‚¹ï¼Œä½ å¯ä»¥åŸºäºè¿™äº›æ¦‚å¿µå’ŒæŠ€æœ¯è¿›ä¸€æ­¥å¼€å‘æ›´é«˜çº§çš„é‡‘èäº§å“ï¼Œå¦‚ï¼š</p>
<ul>
<li><strong>åŠ¨æ€å†å¹³è¡¡ETF</strong>ï¼šæ ¹æ®å¸‚åœºæƒ…å†µè‡ªåŠ¨è°ƒæ•´æƒé‡</li>
<li><strong>æŒ‡æ•°åŸºé‡‘</strong>ï¼šè·Ÿè¸ªç‰¹å®šæŒ‡æ•°çš„æŠ•èµ„äº§å“</li>
<li><strong>ä¸»é¢˜åŸºé‡‘</strong>ï¼šå›´ç»•ç‰¹å®šä¸»é¢˜æˆ–è¡Œä¸šçš„æŠ•èµ„ç»„åˆ</li>
<li><strong>ç®—æ³•äº¤æ˜“ETF</strong>ï¼šç»“åˆç®—æ³•äº¤æ˜“ç­–ç•¥çš„æ™ºèƒ½åŸºé‡‘</li>
</ul>
<p>ç»§ç»­æ¢ç´¢Solana DeFiç”Ÿæ€ï¼Œä½ å°†å‘ç°æ›´å¤šæœ‰è¶£çš„å¯èƒ½æ€§ï¼</p>
<h2 id="é™„å½•ï¼šå®Œæ•´ä»£ç æ¸…å•"><a href="#é™„å½•ï¼šå®Œæ•´ä»£ç æ¸…å•" class="headerlink" title="é™„å½•ï¼šå®Œæ•´ä»£ç æ¸…å•"></a>é™„å½•ï¼šå®Œæ•´ä»£ç æ¸…å•</h2><h3 id="A-package-jsonä¾èµ–"><a href="#A-package-jsonä¾èµ–" class="headerlink" title="A. package.jsonä¾èµ–"></a>A. package.jsonä¾èµ–</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@coral-xyz/anchor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.29.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@solana/web3.js&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.87.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@solana/spl-token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.3.11&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@types/node&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^20.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;typescript&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;ts-node&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^10.9.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;chai&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.3.7&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;mocha&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^10.2.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="B-ç¯å¢ƒé…ç½®"><a href="#B-ç¯å¢ƒé…ç½®" class="headerlink" title="B. ç¯å¢ƒé…ç½®"></a>B. ç¯å¢ƒé…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .envæ–‡ä»¶</span></span><br><span class="line">ANCHOR_PROVIDER_URL=https://api.devnet.solana.com</span><br><span class="line">ANCHOR_WALLET=~/.config/solana/id.json</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœä½¿ç”¨è‡ªå®šä¹‰RPC</span></span><br><span class="line"><span class="comment"># ANCHOR_PROVIDER_URL=https://your-custom-rpc.com</span></span><br></pre></td></tr></table></figure>

<h3 id="C-TypeScripté…ç½®"><a href="#C-TypeScripté…ç½®" class="headerlink" title="C. TypeScripté…ç½®"></a>C. TypeScripté…ç½®</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tsconfig.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ES2020&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;commonjs&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;ES2020&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;outDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./dist&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;rootDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./src&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;forceConsistentCasingInFileNames&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;resolveJsonModule&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/**/*&quot;</span><span class="punctuation">,</span> <span class="string">&quot;example/**/*&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;node_modules&quot;</span><span class="punctuation">,</span> <span class="string">&quot;dist&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä»½å®Œæ•´çš„æŒ‡å—ä¸ºSolana ETFå¼€å‘æä¾›äº†ä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§å®è·µçš„å…¨æ–¹ä½è¦†ç›–ï¼Œæ˜¯å…¥é—¨åˆ°ç²¾é€šçš„ç†æƒ³å­¦ä¹ èµ„æºã€‚</p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/09/20/Solana%E5%AE%9E%E6%88%98-ETF%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%88%9B%E5%BB%BA%E6%8C%87%E4%BB%A4%E5%AE%9E%E7%8E%B0/" rel="prev" title="Solanaå®æˆ˜-ETFçš„ä»‹ç»å’Œåˆ›å»ºæŒ‡ä»¤å®ç°">
                  <i class="fa fa-angle-left"></i> Solanaå®æˆ˜-ETFçš„ä»‹ç»å’Œåˆ›å»ºæŒ‡ä»¤å®ç°
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">samxie</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
